{"version":3,"file":"index.mjs","sources":["../../src/utilities-di.ts","../../src/dialog-interfaces.ts","../../src/errors.ts","../../src/dialog-controller.ts","../../src/dialog-service.ts","../../src/dialog-default-impl.ts","../../src/dialog-event-manager.ts","../../src/dialog-configuration.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["createInterface","DI","singletonRegistration","Registration","singleton","instanceRegistration","instance","IDialogService","IDialogController","IDialogDomRenderer","IDialogDom","IDialogDomAnimator","IDialogEventManager","IDialogGlobalSettings","DialogOpenResult","constructor","wasCancelled","dialog","this","create","DialogCloseResult","status","value","createMappedError","code","details","Error","String","padStart","map","DialogController","p","resolve","IPlatform","ctn","IContainer","_disposeHandler","closed","Promise","reject","_resolve","_reject","activate","settings","container","createChild","model","template","rejectOnCancel","renderer","get","dialogTargetHost","host","document","body","dom","render","rootEventTarget","has","IEventTarget","contentHost","eventManager","contains","register","registerHostNode","r","cmp","Object","assign","getOrCreateVm","$dialog","canActivate","then","dispose","createDialogCancelError","onResolve","ctrlr","controller","Controller","$el","CustomElementDefinition","getDefinition","name","CustomElement","generateName","add","show","e","deactivate","_closingPromise","deactivating","dialogResult","promise","canDeactivate","hide","catch","reason","ok","cancel","error","closeError","createDialogCloseError","Component","component","EmptyComponent","registerResolver","HTMLElement","Element","INode","InstanceProvider","invoke","Ctor","isFunction","isType","output","DialogService","dlgs","_ctn","_defaultSettings","aliasTo","AppTask","dialogService","closeAll","openDialogControllers","length","controllers","slice","open","asDialogOpenPromise","$settings","DialogSettings","from","load","loadedSettings","dialogController","openResult","push","$removeController","remove","finally","all","Array","result","unclosedControllers","filter","unclosed","idx","indexOf","splice","srcs","_validate","_normalize","loaded","maybePromise","onResolveAll","loadedCmp","loadedTpl","isPromise","keyboard","lock","overlayDismiss","whenClosed","onfulfilled","onrejected","DefaultDialogGlobalSettings","startingZIndex","DefaultDialogDomRenderer","_animator","optional","overlayCss","wrapperCss","hostCss","dialogHost","doc","h","css","el","createElement","style","cssText","wrapper","appendChild","overlay","DefaultDialogDom","animator","DefaultDialogEventManager","ctrls","w","IWindow","addEventListener","mouseEvent","handleClick","target","_remove","removeEventListener","handleEvent","keyEvent","key","getActionKey","top","includes","keyCode","undefined","createDialogConfiguration","settingsProvider","registrations","creating","customize","cb","regs","DialogConfiguration","NoopDialogGlobalSettings","DialogDefaultConfiguration","noop"],"mappings":"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"}