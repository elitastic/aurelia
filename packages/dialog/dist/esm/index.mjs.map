{"version":3,"file":"index.mjs","sources":["../../src/utilities-di.ts","../../src/dialog-interfaces.ts","../../src/errors.ts","../../src/dialog-controller.ts","../../src/dialog-service.ts","../../src/dialog-default-impl.ts","../../src/dialog-event-manager.ts","../../src/dialog-configuration.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["createInterface","DI","singletonRegistration","Registration","singleton","instanceRegistration","instance","IDialogService","IDialogController","IDialogDomRenderer","IDialogDom","IDialogEventManager","IDialogGlobalSettings","DialogOpenResult","constructor","wasCancelled","dialog","this","create","DialogCloseResult","status","value","createMappedError","code","details","Error","String","padStart","map","DialogController","p","resolve","IPlatform","ctn","IContainer","_disposeHandler","closed","Promise","reject","_resolve","_reject","activate","settings","container","createChild","model","template","rejectOnCancel","renderer","get","dialogTargetHost","host","document","body","dom","render","rootEventTarget","has","IEventTarget","contentHost","eventManager","contains","register","INode","r","cmp","Object","assign","getOrCreateVm","$dialog","canActivate","then","dispose","createDialogCancelError","onResolve","ctrlr","controller","Controller","$el","CustomElementDefinition","getDefinition","name","CustomElement","generateName","add","e","deactivate","_closingPromise","deactivating","dialogResult","promise","canDeactivate","catch","reason","ok","cancel","error","closeError","createDialogCloseError","Component","component","EmptyComponent","registerResolver","HTMLElement","Element","InstanceProvider","invoke","Ctor","isFunction","isType","output","DialogService","dlgs","_ctn","_defaultSettings","aliasTo","AppTask","dialogService","closeAll","openDialogControllers","length","controllers","slice","open","asDialogOpenPromise","$settings","DialogSettings","from","load","loadedSettings","dialogController","openResult","push","$removeController","remove","finally","all","Array","result","unclosedControllers","filter","unclosed","idx","indexOf","splice","srcs","_validate","_normalize","loaded","maybePromise","onResolveAll","loadedCmp","loadedTpl","isPromise","keyboard","lock","overlayDismiss","whenClosed","onfulfilled","onrejected","DefaultDialogGlobalSettings","startingZIndex","DefaultDialogDomRenderer","overlayCss","wrapperCss","hostCss","dialogHost","doc","h","css","el","createElement","style","cssText","wrapper","appendChild","overlay","DefaultDialogDom","DefaultDialogEventManager","ctrls","w","IWindow","addEventListener","mouseEvent","handleClick","target","_remove","removeEventListener","handleEvent","keyEvent","key","getActionKey","top","includes","keyCode","undefined","createDialogConfiguration","settingsProvider","registrations","creating","customize","cb","regs","DialogConfiguration","NoopDialogGlobalSettings","DialogDefaultConfiguration","noop"],"mappings":"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"}