{"version":3,"file":"index.mjs","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["lookup","Map","notImplemented","name","createError","Platform","constructor","g","overrides","this","macroTaskRequested","macroTaskHandle","globalThis","split","forEach","prop","method","bind","performanceNow","performance","now","flushMacroTask","taskQueue","TaskQueue","requestMacroTask","cancelMacroTask","static","platform","get","set","setTimeout","clearTimeout","flush","isEmpty","_pendingAsyncCount","_processing","length","_pending","_delayed","_hasNoMoreFiniteWork","every","isPersistent","$request","$cancel","_suspenderTask","_flushRequested","_yieldPromise","_taskPool","_taskPoolSize","_lastRequest","_lastFlush","_requestFlush","_now","_tracer","Tracer","console","time","push","i","queueTime","splice","cur","shift","run","status","suspend","p","resolve","cancel","async","createExposedPromise","queueTask","callback","opts","delay","preempt","persistent","reusable","defaultQueueTaskOptions","preemptDelayComboError","preemptyPersistentComboError","task","taskPool","index","reuse","Task","remove","idx","indexOf","id","_returnToPool","_resetPersistentTask","reset","createdTime","_completeAsyncTask","TaskAbortError","Error","super","TaskStatus","result","_result","_status","promise","_resolve","_reject","reject","Promise","tracer","ret","then","$ret","dispose","enabled","catch","err","TaskQueuePriority","depth","enter","obj","log","repeat","leave","trace","prefix","processing","pending","delayed","flushReq","susTask","info","created","Math","round","queue","taskStatus","$resolve","$reject","executor","msg","reportTaskQueue","flushRequested","ensureEmpty","x"],"mappings":"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"}