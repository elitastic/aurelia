{"version":3,"file":"index.cjs","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["lookup","Map","notImplemented","name","createError","Platform","constructor","g","overrides","this","macroTaskRequested","macroTaskHandle","globalThis","split","forEach","prop","method","bind","performanceNow","performance","now","flushMacroTask","taskQueue","TaskQueue","requestMacroTask","cancelMacroTask","static","platform","get","set","setTimeout","clearTimeout","flush","$request","$cancel","_suspenderTask","_pendingAsyncCount","_processing","_pending","_delayed","_flushRequested","_yieldPromise","_taskPool","_taskPoolSize","_lastRequest","_lastFlush","_requestFlush","_now","_tracer","Tracer","console","isEmpty","length","_hasNoMoreFiniteWork","every","isPersistent","time","push","i","queueTime","splice","cur","shift","run","status","suspend","p","resolve","cancel","async","createExposedPromise","queueTask","callback","opts","delay","preempt","persistent","reusable","defaultQueueTaskOptions","preemptDelayComboError","preemptyPersistentComboError","task","taskPool","index","reuse","Task","remove","idx","indexOf","id","_returnToPool","_resetPersistentTask","reset","createdTime","_completeAsyncTask","TaskAbortError","Error","super","TaskStatus","tracer","_resolve","_reject","_result","_status","result","promise","reject","Promise","ret","then","$ret","dispose","enabled","catch","err","TaskQueuePriority","depth","enter","obj","log","repeat","leave","trace","prefix","processing","pending","delayed","flushReq","susTask","info","created","Math","round","queue","taskStatus","$resolve","$reject","executor","msg","reportTaskQueue","flushRequested","ensureEmpty","x"],"mappings":"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"}