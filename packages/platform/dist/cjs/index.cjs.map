{"version":3,"file":"index.cjs","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["lookup","Map","notImplemented","name","createError","Platform","constructor","g","overrides","this","macroTaskRequested","macroTaskHandle","globalThis","split","forEach","prop","method","bind","performanceNow","performance","now","flushMacroTask","taskQueue","TaskQueue","requestMacroTask","cancelMacroTask","static","platform","get","set","setTimeout","clearTimeout","flush","$request","$cancel","_suspenderTask","_pendingAsyncCount","_processing","_pending","_delayed","flushRequested","_yieldPromise","_taskPool","_taskPoolSize","_lastRequest","_lastFlush","_requestFlush","_tracer","Tracer","console","processing","pending","delayed","isEmpty","length","_hasNoMoreFiniteWork","every","isPersistent","time","push","i","queueTime","splice","cur","shift","run","status","suspend","p","resolve","cancel","async","createExposedPromise","queueTask","callback","opts","delay","preempt","persistent","reusable","defaultQueueTaskOptions","preemptDelayComboError","preemptyPersistentComboError","task","taskPool","index","reuse","Task","remove","idx","indexOf","id","_returnToPool","_resetPersistentTask","reset","createdTime","_completeAsyncTask","TaskAbortError","Error","super","TaskStatus","tracer","_resolve","_reject","_result","_status","result","promise","reject","Promise","ret","then","$ret","dispose","enabled","catch","err","TaskQueuePriority","depth","enter","obj","log","repeat","leave","trace","prefix","flushReq","susTask","info","created","Math","round","queue","taskStatus","$resolve","$reject","executor","msg"],"mappings":"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"}