{"version":3,"file":"index.cjs","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["tsPending","tsRunning","tsCompleted","tsCanceled","lookup","Map","notImplemented","name","createError","Platform","constructor","g","overrides","this","macroTaskRequested","macroTaskHandle","globalThis","split","forEach","prop","method","bind","performanceNow","performance","now","flushMacroTask","taskQueue","TaskQueue","requestMacroTask","cancelMacroTask","getOrCreate","platform","get","set","setTimeout","clearTimeout","flush","isEmpty","_pendingAsyncCount","_processing","length","_pending","_delayed","_hasNoMoreFiniteWork","every","isPersistent","$request","$cancel","_suspenderTask","_flushRequested","_yieldPromise","_lastRequest","_lastFlush","_requestFlush","_now","_tracer","Tracer","console","curr","push","i","queueTime","splice","cur","shift","run","status","suspend","p","resolve","cancel","yield","createExposedPromise","queueTask","callback","opts","delay","preempt","persistent","defaultQueueTaskOptions","preemptDelayComboError","preemptyPersistentComboError","time","task","Task","remove","idx","indexOf","id","_resetPersistentTask","reset","createdTime","_completeAsyncTask","TaskAbortError","Error","super","result","_result","_status","promise","_resolve","_reject","reject","Promise","tracer","ret","then","$ret","dispose","enabled","catch","err","depth","enter","obj","log","repeat","leave","trace","prefix","processing","pending","delayed","flushReq","susTask","info","created","Math","round","queue","$resolve","$reject","executor","msg","reportTaskQueue","flushRequested","ensureEmpty","x"],"mappings":"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"}