{"version":3,"file":"index.cjs","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["Parameter","constructor","name","isOptional","isStar","this","ConfigurableRoute","path","caseSensitive","handler","Endpoint","residualEndpoint","_residualEndpoint","endpoint","Error","route","params","equalsOrResidual","other","RecognizedRoute","Candidate","chars","states","skippedStates","result","head","length","advance","ch","stateToAdd","matchCount","state","$process","nextState","skippedState","isMatch","add","concat","segment","nextStates","createError","separator","isSeparator","$nextState","isDynamic","push","remove","finalize","collectSkippedStates","getParams","param","i","ii","compareTo","b","statesA","statesB","iA","iB","Math","max","stateA","stateB","segmentA","segmentB","kind","skippedStatesA","skippedStatesB","skippedStatesALen","skippedStatesBLen","skippedStateA","skippedStateB","hasEndpoint","candidate","compareChains","a","RecognizeResult","isEmpty","candidates","rootState","getSolution","filter","sort","splice","indexOf","slice","RESIDUE","RouteRecognizer","State","cache","Map","endpointLookup","routeOrRoutes","addResidue","Array","$add","clear","lookup","has","$route","parts","split","isNotEmpty","part","append","charAt","endsWith","DynamicSegment","appendTo","StarSegment","StaticSegment","setEndpoint","set","recognize","get","$recognize","decodeURI","startsWith","getEndpoint","prevState","value","optional","undefined","find","s","equals","includes","toUpperCase","toLowerCase","msg"],"mappings":"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"}