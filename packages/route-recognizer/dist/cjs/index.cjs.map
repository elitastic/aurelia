{"version":3,"file":"index.cjs","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["Parameter","constructor","name","isOptional","isStar","this","ConfigurableRoute","path","caseSensitive","handler","Endpoint","residualEndpoint","_residualEndpoint","endpoint","Error","route","params","equalsOrResidual","other","RecognizedRoute","$params","Object","create","key","value","decodeURIComponent","freeze","Candidate","chars","states","skippedStates","result","head","length","advance","ch","stateToAdd","matchCount","state","$process","nextState","skippedState","isMatch","add","concat","segment","nextStates","createError","separator","isSeparator","$nextState","isDynamic","push","remove","finalize","collectSkippedStates","getParams","param","i","ii","compareTo","b","statesA","statesB","iA","iB","Math","max","stateA","stateB","segmentA","segmentB","kind","skippedStatesA","skippedStatesB","skippedStatesALen","skippedStatesBLen","skippedStateA","skippedStateB","hasEndpoint","candidate","compareChains","a","RecognizeResult","isEmpty","candidates","rootState","getSolution","filter","sort","splice","indexOf","slice","RESIDUE","RouteRecognizer","State","cache","Map","endpointLookup","routeOrRoutes","addResidue","Array","$add","clear","lookup","has","$route","parts","split","isNotEmpty","part","append","charAt","endsWith","DynamicSegment","appendTo","StarSegment","StaticSegment","setEndpoint","set","recognize","get","$recognize","decodeURI","startsWith","getEndpoint","prevState","optional","undefined","find","s","equals","includes","toUpperCase","toLowerCase","msg"],"mappings":"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"}