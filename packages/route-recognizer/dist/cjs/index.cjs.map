{"version":3,"file":"index.cjs","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["Parameter","constructor","name","isOptional","isStar","this","ConfigurableRoute","path","caseSensitive","handler","Endpoint","route","params","RecognizedRoute","endpoint","Candidate","chars","states","skippedStates","result","head","length","advance","ch","stateToAdd","matchCount","state","$process","nextState","skippedState","isMatch","add","concat","segment","nextStates","createError","separator","isSeparator","$nextState","isDynamic","push","remove","finalize","collectSkippedStates","getParams","param","i","ii","compareTo","b","statesA","statesB","iA","iB","Math","max","stateA","stateB","segmentA","segmentB","kind","skippedStatesA","skippedStatesB","skippedStatesALen","skippedStatesBLen","skippedStateA","skippedStateB","hasEndpoint","candidate","compareChains","a","RecognizeResult","isEmpty","candidates","rootState","getSolution","filter","sort","splice","indexOf","slice","RESIDUE","RouteRecognizer","State","cache","Map","endpointLookup","routeOrRoutes","addResidue","Array","$add","clear","lookup","has","$route","parts","split","isNotEmpty","part","append","charAt","endsWith","Error","DynamicSegment","appendTo","StarSegment","StaticSegment","setEndpoint","set","recognize","get","$recognize","decodeURI","startsWith","getEndpoint","prevState","value","optional","undefined","find","s","equals","includes","toUpperCase","toLowerCase","msg"],"mappings":"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"}