{"version":3,"file":"index.mjs","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["Parameter","constructor","name","isOptional","isStar","this","ConfigurableRoute","path","caseSensitive","handler","Endpoint","route","params","RecognizedRoute","endpoint","Candidate","chars","states","skippedStates","result","head","length","advance","ch","stateToAdd","matchCount","state","$process","nextState","skippedState","isMatch","add","concat","segment","nextStates","Error","separator","isSeparator","$nextState","isDynamic","push","remove","finalize","collectSkippedStates","getParams","param","i","ii","compareTo","b","statesA","statesB","iA","iB","Math","max","stateA","stateB","segmentA","segmentB","kind","skippedStatesA","skippedStatesB","skippedStatesALen","skippedStatesBLen","skippedStateA","skippedStateB","hasEndpoint","candidate","compareChains","a","RecognizeResult","rootState","candidates","isEmpty","getSolution","filter","sort","splice","indexOf","slice","RouteRecognizer","State","cache","Map","endpointLookup","routeOrRoutes","Array","$add","clear","lookup","has","$route","parts","split","isNotEmpty","part","append","charAt","endsWith","DynamicSegment","appendTo","StarSegment","StaticSegment","setEndpoint","set","recognize","get","$recognize","decodeURI","startsWith","getEndpoint","prevState","value","optional","undefined","find","s","equals","includes","toUpperCase","toLowerCase"],"mappings":"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"}