{"version":3,"file":"index.mjs","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["Parameter","constructor","name","isOptional","isStar","this","ConfigurableRoute","path","caseSensitive","handler","Endpoint","route","params","RecognizedRoute","endpoint","Candidate","chars","states","skippedStates","result","head","length","advance","ch","stateToAdd","matchCount","state","$process","nextState","skippedState","isMatch","add","concat","segment","nextStates","createError","separator","isSeparator","$nextState","isDynamic","push","remove","finalize","collectSkippedStates","getParams","param","i","ii","compareTo","b","statesA","statesB","iA","iB","Math","max","stateA","stateB","segmentA","segmentB","kind","skippedStatesA","skippedStatesB","skippedStatesALen","skippedStatesBLen","skippedStateA","skippedStateB","hasEndpoint","candidate","compareChains","a","RecognizeResult","rootState","candidates","isEmpty","getSolution","filter","sort","splice","indexOf","slice","RESIDUE","RouteRecognizer","State","cache","Map","endpointLookup","routeOrRoutes","addResidue","Array","$add","clear","lookup","has","$route","parts","split","isNotEmpty","part","append","charAt","endsWith","Error","DynamicSegment","appendTo","StarSegment","StaticSegment","setEndpoint","set","recognize","get","$recognize","decodeURI","startsWith","getEndpoint","prevState","value","optional","undefined","find","s","equals","includes","toUpperCase","toLowerCase","msg"],"mappings":"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"}