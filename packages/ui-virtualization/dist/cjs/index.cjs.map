{"version":3,"file":"index.cjs","sources":["../../src/interfaces.ts","../../src/utilities-repeat.ts","../../src/utilities-dom.ts","../../src/virtual-repeat.ts","../../src/collection-strategy.ts","../../src/scroller-observer.ts","../../src/virtual-repeat-dom-renderer.ts","../../src/configuration.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["IDomRenderer","DI","createInterface","IScrollerObsererLocator","ICollectionStrategyLocator","unwrapExpression","expression","unwrapped","BindingBehaviorExpression","ValueConverterExpression","getScrollerElement","element","current","parentNode","document","body","hasOverflowScroll","Error","style","window","getComputedStyle","overflowY","overflow","getStyleValues","styles","currentStyle","value","styleValue","i","ii","length","parseFloat","isNaN","calcOuterHeight","height","getBoundingClientRect","getDistanceToScroller","child","scroller","offsetParent","childOffsetTop","offsetTop","contains","noScrollInfo","scrollTop","width","VirtualRepeat","constructor","location","instruction","parent","_factory","_container","platform","this","items","views","task","_currScrollerInfo","itemHeight","minViewsRequired","dom","scrollerObserver","iteratorInstruction","props","forOf","from","iterable","_a","hasWrapExpression","_hasWrapExpression","_obsMediator","CollectionObservationMediator","local","declaration","name","taskQueue","domWriteQueue","inject","IRenderLocation","IInstruction","IController","IViewFactory","IContainer","IPlatform","attaching","container","collectionStrategyLocator","get","collectionStrategy","getStrategy","itemCount","count","repeatDom","render","firstView","_createAndActivateFirstView","getObserver","subscribe","_initCalculation","itemsChanged","detaching","cancel","_resetCalculation","dispose","unsubscribe","nodes","firstChild","scrollerInfo","getValue","calculation","_calculate","signals","minViews","Calculation","reset","none","Math","floor","controller","$controller","maxViewsRequired","currViewCount","view","deactivate","remove","realViewCount","min","push","create","firstIndex","topCount","botCount","measureBuffer","idx","item","prevView","scope","isActive","bindingContext","overrideContext","$index","$length","insertBefore","nextSibling","Scope","fromParent","BindingContext","enhanceOverrideContext","activate","start","update","calcRealScrollTop","scroller_scroll_top","top_buffer_distance","top","real_scroll_top","max","viewCount","collectionSize","first_index_after_scroll_adjustment","top_buffer_item_count_after_scroll_adjustment","bot_buffer_item_count_after_scroll_adjustment","handleScrollerChange","queueTask","handleScroll","prevScrollerInfo","prevFirstIndex","currFirstIndex","topCount1","botCount1","isScrollingDown","isJumping","viewsToMoveCount","idxIncrement","shift","bottom","pop","unshift","isNearBottom","isNearTop","getDistances","_b","distances","getViews","slice","handleCollectionChange","_indexMap","_flags","handleInnerCollectionChange","newItems","evaluate","oldItems","getOrCreateFirstView","repeatController","parentScope","itemScope","first","customAttribute","isTemplateController","bindables","property","primary","repeat","key","indexMap","flags","c","_collection","stop","getCollectionObserver","SizingSignals","static","enhancedContextCached","WeakSet","context","ctx","has","Object","defineProperties","$first","createGetterDescriptor","$last","$middle","$even","$odd","getter","configurable","enumerable","CollectionStrategyLocator","Registration","singleton","register","NullCollectionStrategy","Array","ArrayCollectionStrategy","val","last","index","range","end","len","ScrollerObserverLocator","p","cache","WeakMap","observer","set","ScrollerObserver","subs","Set","geo","addEventListener","ResizeObserverCtor","getResizeObserverClass","sizeObs","entries","oldGeo","newGeo","ElementGeometry","contentRect","equals","notify","observe","removeEventListener","disconnect","forEach","notifySubscriber","setValue","rect","ScrollerInfo","handleEvent","_e","sub","size","add","delete","domRect","t","l","left","w","h","ResizeObserver","DefaultDomRenderer","target","doc","bufferEls","tagName","TableDom","closest","ListDom","DefaultDom","anchor","tH","bH","bot","list","super","table","el","createElement","DefaultVirtualRepeatConfiguration"],"mappings":"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"}