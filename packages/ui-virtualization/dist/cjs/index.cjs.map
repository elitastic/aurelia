{"version":3,"file":"index.cjs","sources":["../../src/interfaces.ts","../../src/utilities-repeat.ts","../../src/utilities-dom.ts","../../src/virtual-repeat.ts","../../src/collection-strategy.ts","../../src/scroller-observer.ts","../../src/virtual-repeat-dom-renderer.ts","../../src/configuration.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["IDomRenderer","DI","createInterface","IScrollerObsererLocator","ICollectionStrategyLocator","unwrapExpression","expression","unwrapped","BindingBehaviorExpression","ValueConverterExpression","getScrollerElement","element","current","parentNode","document","body","hasOverflowScroll","Error","style","window","getComputedStyle","overflowY","overflow","getStyleValues","styles","currentStyle","value","styleValue","i","ii","length","parseFloat","isNaN","calcOuterHeight","height","getBoundingClientRect","getDistanceToScroller","child","scroller","offsetParent","childOffsetTop","offsetTop","contains","noScrollInfo","scrollTop","width","VirtualRepeat","constructor","location","instruction","parent","_factory","_container","platform","this","items","views","task","_currScrollerInfo","itemHeight","minViewsRequired","dom","scrollerObserver","iteratorInstruction","props","forOf","from","iterable","hasWrapExpression","_hasWrapExpression","_obsMediator","CollectionObservationMediator","local","declaration","name","taskQueue","domWriteQueue","inject","IRenderLocation","IInstruction","IController","IViewFactory","IContainer","IPlatform","attaching","container","collectionStrategyLocator","get","collectionStrategy","getStrategy","itemCount","count","repeatDom","render","firstView","_createAndActivateFirstView","getObserver","subscribe","_initCalculation","itemsChanged","detaching","cancel","_resetCalculation","dispose","unsubscribe","nodes","firstChild","scrollerInfo","getValue","calculation","_calculate","signals","minViews","Calculation","reset","none","Math","floor","controller","$controller","maxViewsRequired","currViewCount","view","deactivate","remove","realViewCount","min","push","create","firstIndex","topCount","botCount","measureBuffer","idx","item","prevView","scope","isActive","bindingContext","overrideContext","$index","$length","insertBefore","nextSibling","Scope","fromParent","BindingContext","enhanceOverrideContext","activate","start","update","calcRealScrollTop","scroller_scroll_top","top_buffer_distance","top","real_scroll_top","max","viewCount","collectionSize","first_index_after_scroll_adjustment","top_buffer_item_count_after_scroll_adjustment","bot_buffer_item_count_after_scroll_adjustment","handleScrollerChange","queueTask","handleScroll","prevScrollerInfo","prevFirstIndex","currFirstIndex","topCount1","botCount1","isScrollingDown","isJumping","viewsToMoveCount","idxIncrement","shift","bottom","pop","unshift","isNearBottom","isNearTop","getDistances","distances","getViews","slice","handleCollectionChange","_indexMap","handleInnerCollectionChange","newItems","evaluate","oldItems","getOrCreateFirstView","repeatController","parentScope","itemScope","first","customAttribute","isTemplateController","bindables","property","primary","repeat","key","indexMap","c","_collection","stop","getCollectionObserver","SizingSignals","static","enhancedContextCached","WeakSet","context","ctx","has","Object","defineProperties","$first","createGetterDescriptor","$last","$middle","$even","$odd","getter","configurable","enumerable","CollectionStrategyLocator","Registration","singleton","register","NullCollectionStrategy","Array","ArrayCollectionStrategy","val","last","index","range","end","len","ScrollerObserverLocator","p","cache","WeakMap","observer","set","ScrollerObserver","subs","Set","geo","addEventListener","ResizeObserverCtor","getResizeObserverClass","sizeObs","entries","oldGeo","newGeo","ElementGeometry","contentRect","equals","notify","observe","removeEventListener","disconnect","forEach","notifySubscriber","setValue","rect","ScrollerInfo","handleEvent","_e","sub","size","add","delete","domRect","t","l","left","w","h","ResizeObserver","DefaultDomRenderer","target","doc","bufferEls","tagName","TableDom","closest","ListDom","DefaultDom","anchor","tH","bH","bot","list","super","table","el","createElement","DefaultVirtualRepeatConfiguration"],"mappings":"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"}