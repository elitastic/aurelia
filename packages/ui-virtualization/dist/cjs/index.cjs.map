{"version":3,"file":"index.cjs","sources":["../../src/interfaces.ts","../../src/utilities-repeat.ts","../../src/utilities-dom.ts","../../src/virtual-repeat.ts","../../src/collection-strategy.ts","../../src/scroller-observer.ts","../../src/virtual-repeat-dom-renderer.ts","../../src/configuration.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["IDomRenderer","DI","createInterface","IScrollerObsererLocator","ICollectionStrategyLocator","unwrapExpression","expression","unwrapped","BindingBehaviorExpression","ValueConverterExpression","getScrollerElement","element","current","parentNode","document","body","hasOverflowScroll","Error","style","window","getComputedStyle","overflowY","overflow","getStyleValues","styles","currentStyle","value","styleValue","i","ii","length","parseFloat","isNaN","calcOuterHeight","height","getBoundingClientRect","getDistanceToScroller","child","scroller","offsetParent","childOffsetTop","offsetTop","contains","noScrollInfo","scrollTop","width","VirtualRepeat","constructor","location","instruction","parent","_factory","_container","platform","this","items","views","task","_currScrollerInfo","itemHeight","minViewsRequired","dom","scrollerObserver","iteratorInstruction","props","forOf","iterable","hasWrapExpression","_hasWrapExpression","_obsMediator","CollectionObservationMediator","local","declaration","name","taskQueue","domWriteQueue","inject","IRenderLocation","IInstruction","IController","IViewFactory","IContainer","IPlatform","attaching","container","collectionStrategyLocator","get","collectionStrategy","getStrategy","itemCount","count","repeatDom","render","firstView","_createAndActivateFirstView","getObserver","subscribe","_initCalculation","itemsChanged","detaching","cancel","_resetCalculation","dispose","unsubscribe","nodes","firstChild","scrollerInfo","getValue","calculation","_calculate","signals","minViews","Calculation","reset","none","Math","floor","from","controller","$controller","maxViewsRequired","currViewCount","view","deactivate","remove","realViewCount","min","push","create","firstIndex","topCount","botCount","measureBuffer","idx","item","prevView","scope","isActive","bindingContext","overrideContext","$index","$length","insertBefore","nextSibling","Scope","fromParent","BindingContext","enhanceOverrideContext","activate","start","update","calcRealScrollTop","scroller_scroll_top","top_buffer_distance","top","real_scroll_top","max","viewCount","collectionSize","first_index_after_scroll_adjustment","top_buffer_item_count_after_scroll_adjustment","bot_buffer_item_count_after_scroll_adjustment","handleScrollerChange","queueTask","handleScroll","prevScrollerInfo","prevFirstIndex","currFirstIndex","topCount1","botCount1","isScrollingDown","isJumping","viewsToMoveCount","idxIncrement","shift","bottom","pop","unshift","isNearBottom","isNearTop","getDistances","distances","getViews","slice","handleCollectionChange","_collection","_indexmap","handleInnerCollectionChange","newItems","astEvaluate","strict","oldItems","getOrCreateFirstView","repeatController","parentScope","itemScope","first","customAttribute","isTemplateController","bindables","property","primary","repeat","key","collection","indexMap","c","stop","getCollectionObserver","SizingSignals","static","enhancedContextCached","WeakSet","context","ctx","has","Object","defineProperties","$first","createGetterDescriptor","$last","$middle","$even","$odd","getter","configurable","enumerable","CollectionStrategyLocator","Registration","singleton","register","NullCollectionStrategy","Array","ArrayCollectionStrategy","val","last","index","range","end","len","ScrollerObserverLocator","p","cache","WeakMap","observer","set","ScrollerObserver","subs","Set","geo","addEventListener","ResizeObserverCtor","getResizeObserverClass","sizeObs","entries","oldGeo","newGeo","ElementGeometry","contentRect","equals","notify","observe","removeEventListener","disconnect","forEach","notifySubscriber","setValue","rect","ScrollerInfo","handleEvent","_e","sub","size","add","delete","domRect","t","l","left","w","h","ResizeObserver","DefaultDomRenderer","target","doc","bufferEls","tagName","TableDom","closest","ListDom","DefaultDom","anchor","tH","bH","bot","list","super","table","el","createElement","DefaultVirtualRepeatConfiguration"],"mappings":"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"}