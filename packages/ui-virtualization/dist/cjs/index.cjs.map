{"version":3,"file":"index.cjs","sources":["../../src/interfaces.ts","../../src/utilities-repeat.ts","../../src/utilities-dom.ts","../../src/virtual-repeat.ts","../../src/collection-strategy.ts","../../src/scroller-observer.ts","../../src/virtual-repeat-dom-renderer.ts","../../src/configuration.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["IDomRenderer","DI","createInterface","IScrollerObsererLocator","ICollectionStrategyLocator","unwrapExpression","expression","unwrapped","BindingBehaviorExpression","ValueConverterExpression","getScrollerElement","element","current","parentNode","document","body","hasOverflowScroll","Error","style","window","getComputedStyle","overflowY","overflow","getStyleValues","styles","currentStyle","value","styleValue","i","ii","length","parseFloat","isNaN","calcOuterHeight","height","getBoundingClientRect","getDistanceToScroller","child","scroller","offsetParent","childOffsetTop","offsetTop","contains","noScrollInfo","scrollTop","width","VirtualRepeat","inject","IRenderLocation","IInstruction","IController","IViewFactory","IContainer","IPlatform","constructor","location","instruction","parent","_factory","_container","platform","this","items","views","task","_currScrollerInfo","itemHeight","minViewsRequired","dom","scrollerObserver","iteratorInstruction","props","forOf","iterable","hasWrapExpression","_hasWrapExpression","_obsMediator","CollectionObservationMediator","local","declaration","name","taskQueue","domWriteQueue","attaching","container","collectionStrategyLocator","get","collectionStrategy","getStrategy","itemCount","count","repeatDom","render","firstView","_createAndActivateFirstView","getObserver","subscribe","_initCalculation","itemsChanged","detaching","cancel","_resetCalculation","dispose","unsubscribe","nodes","firstChild","scrollerInfo","getValue","calculation","_calculate","signals","minViews","Calculation","reset","none","Math","floor","from","controller","$controller","maxViewsRequired","currViewCount","view","deactivate","remove","realViewCount","min","push","create","firstIndex","topCount","botCount","measureBuffer","idx","item","prevView","scope","isActive","bindingContext","overrideContext","$index","$length","insertBefore","nextSibling","Scope","fromParent","BindingContext","enhanceOverrideContext","activate","start","update","calcRealScrollTop","scroller_scroll_top","top_buffer_distance","top","real_scroll_top","max","viewCount","collectionSize","first_index_after_scroll_adjustment","top_buffer_item_count_after_scroll_adjustment","bot_buffer_item_count_after_scroll_adjustment","handleScrollerChange","queueTask","handleScroll","prevScrollerInfo","prevFirstIndex","currFirstIndex","topCount1","botCount1","isScrollingDown","isJumping","viewsToMoveCount","idxIncrement","shift","bottom","pop","unshift","isNearBottom","isNearTop","getDistances","distances","getViews","slice","handleCollectionChange","_collection","_indexmap","handleInnerCollectionChange","newItems","astEvaluate","strict","oldItems","getOrCreateFirstView","repeatController","parentScope","itemScope","first","customAttribute","isTemplateController","bindables","property","primary","repeat","key","collection","indexMap","c","stop","getCollectionObserver","SizingSignals","static","enhancedContextCached","WeakSet","context","ctx","has","Object","defineProperties","$first","createGetterDescriptor","$last","$middle","$even","$odd","getter","configurable","enumerable","CollectionStrategyLocator","Registration","singleton","register","NullCollectionStrategy","Array","ArrayCollectionStrategy","val","last","index","range","end","len","ScrollerObserverLocator","p","cache","WeakMap","observer","set","ScrollerObserver","subs","Set","geo","addEventListener","ResizeObserverCtor","getResizeObserverClass","sizeObs","entries","oldGeo","newGeo","ElementGeometry","contentRect","equals","notify","observe","removeEventListener","disconnect","forEach","notifySubscriber","setValue","rect","ScrollerInfo","handleEvent","_e","sub","size","add","delete","domRect","t","l","left","w","h","ResizeObserver","DefaultDomRenderer","target","doc","bufferEls","tagName","TableDom","closest","ListDom","DefaultDom","anchor","tH","bH","bot","list","super","table","el","createElement","DefaultVirtualRepeatConfiguration"],"mappings":"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"}