{"version":3,"file":"index.cjs","sources":["../../src/interfaces.ts","../../src/utilities-repeat.ts","../../src/utilities-dom.ts","../../src/virtual-repeat.ts","../../src/collection-strategy.ts","../../src/scroller-observer.ts","../../src/virtual-repeat-dom-renderer.ts","../../src/configuration.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["IDomRenderer","DI","createInterface","IScrollerObsererLocator","ICollectionStrategyLocator","unwrapExpression","expression","unwrapped","BindingBehaviorExpression","ValueConverterExpression","getScrollerElement","element","current","parentNode","document","body","hasOverflowScroll","Error","style","window","getComputedStyle","overflowY","overflow","getStyleValues","styles","currentStyle","value","styleValue","i","ii","length","parseFloat","isNaN","calcOuterHeight","height","getBoundingClientRect","calcScrollerViewportHeight","getDistanceToScroller","child","scroller","offsetParent","childOffsetTop","offsetTop","contains","noScrollInfo","scrollTop","width","VirtualRepeat","constructor","this","items","views","task","_currScrollerInfo","_needInitCalculation","itemHeight","minViewsRequired","dom","scrollerObserver","location","resolve","IRenderLocation","instruction","IInstruction","parent","IController","_factory","IViewFactory","_strategyLocator","_domRenderer","scrollerObserverLocator","iteratorInstruction","props","forOf","iterable","hasWrapExpression","_hasWrapExpression","_obsMediator","CollectionObservationMediator","_handleInnerCollectionChange","_handleCollectionChange","local","declaration","name","taskQueue","IPlatform","domWriteQueue","attaching","render","getObserver","subscribe","start","collectionStrategy","getStrategy","_handleItemsChanged","detaching","cancel","_resetCalculation","dispose","unsubscribe","stop","_initCalculation","count","firstView","_createAndActivateFirstView","nodes","firstChild","scrollerInfo","getValue","calculation","_calculate","signals","minViews","itemCount","Calculation","reset","none","Math","ceil","from","update","repeatController","$controller","currViewCount","view","deactivate","maxViewsRequired","realViewCount","min","push","create","firstIndex","topCount","botCount","measureBuffer","idx","item","prevView","scope","isActive","bindingContext","overrideContext","$index","$length","insertBefore","nextSibling","Scope","fromParent","BindingContext","enhanceOverrideContext","activate","itemsChanged","_queueHandleItemsChanged","_calcRealScrollTop","scroller_scroll_top","top_buffer_distance","top","real_scroll_top","max","viewCount","collectionSize","first_index_after_scroll_adjustment","floor","top_buffer_item_count_after_scroll_adjustment","bot_buffer_item_count_after_scroll_adjustment","handleScrollerChange","queueTask","handleScroll","prevScrollerInfo","repeatDom","prevFirstIndex","currFirstIndex","topCount1","botCount1","isScrollingDown","isJumping","viewsToMoveCount","idxIncrement","shift","bottom","pop","unshift","isNearBottom","isNearTop","getDistances","distances","getViews","slice","newItems","astEvaluate","strict","oldItems","getOrCreateFirstView","parentScope","itemScope","first","$au","type","isTemplateController","bindables","primary","repeat","handleCollectionChange","c","_collection","getCollectionObserver","SizingSignals","enhancedContextCached","WeakSet","context","ctx","has","Object","defineProperties","$first","createGetterDescriptor","$last","$middle","$even","$odd","getter","configurable","enumerable","get","CollectionStrategyLocator","register","container","Registration","singleton","NullCollectionStrategy","Array","ArrayCollectionStrategy","val","last","index","range","end","len","ScrollerObserverLocator","inject","p","cache","WeakMap","observer","set","ScrollerObserver","subs","Set","geo","addEventListener","ResizeObserverCtor","getResizeObserverClass","sizeObs","entries","oldGeo","newGeo","ElementGeometry","contentRect","equals","notify","observe","removeEventListener","disconnect","forEach","notifySubscriber","setValue","rect","ScrollerInfo","handleEvent","_e","sub","size","add","delete","domRect","t","l","left","w","h","ResizeObserver","DefaultDomRenderer","target","doc","bufferEls","tagName","TableDom","closest","ListDom","DefaultDom","anchor","tH","bH","bot","remove","list","super","table","el","createElement","DefaultVirtualizationConfiguration"],"mappings":";;;;;;;;;;AAiBO,MAAMA,kBAA4BC,EAAAA,GAAGC,gBAA8B;;AAiBnE,MAAMC,kBAAuCF,EAAAA,GAAGC,gBAAyC;;AA6BzF,MAAME,kBAA0CH,EAAAA,GAAGC,gBAA4C;;ACzDhG,SAAUG,iBAAiBC;IAC/B,IAAIC,IAAY;IAChB,OAAOD,aAAsBE,EAAAA,2BAA2B;QACtDF,IAAaA,EAAWA;AACzB;IACD,OAAOA,aAAsBG,EAAAA,0BAA0B;QACrDH,IAAaA,EAAWA;QACxBC,IAAY;AACb;IACD,OAAOA,IAAYD,IAAa;AAClC;;ACTO,MAAMI,qBAAsBC;IACjC,IAAIC,IAAUD,EAAQE;IACtB,OAAOD,MAAY,QAAQA,MAAYE,SAASC,MAAM;QACpD,IAAIC,kBAAkBJ,IAAU;YAC9B,OAAOA;AACR;QACDA,IAAUA,EAAQC;AACnB;IACD,MAAM,IAAII,MAAM;AAA4B;;AAiBvC,MAAMD,oBAAqBL;IAChC,MAAMO,IAAQC,OAAOC,iBAAiBT;IAEtC,OAAOO,MAAUA,EAAMG,cAAc,YAAYH,EAAMI,aAAa,YAAYJ,EAAMG,cAAc,UAAUH,EAAMI,aAAa;AAAO;;AAMnI,MAAMC,iBAAiB,CAACZ,MAAqBa;IAClD,MAAMC,IAAeN,OAAOC,iBAAiBT;IAC7C,IAAIe,IAAgB;IACpB,IAAIC,IAAqB;IACzB,KAAK,IAAIC,IAAI,GAAGC,IAAKL,EAAOM,QAAQD,IAAKD,KAAKA,GAAG;QAC/CD,IAAaI,WAAWN,EAAaD,EAAOI;QAC5CF,KAASM,MAAML,KAAc,IAAIA;AAClC;IACD,OAAOD;AAAK;;AAGP,MAAMO,kBAAmBtB;IAC9B,IAAIuB,IAASvB,EAAQwB,wBAAwBD;IAC7CA,KAAUX,eAAeZ,GAAS,aAAa;IAC/C,OAAOuB;AAAM;;AAGR,MAAME,6BAA8BzB;IACzC,IAAIuB,IAASvB,EAAQwB,wBAAwBD;IAC7CA,KAAUX,eAAeZ,GAAS,kBAAkB,qBAAqB,cAAc;IACvF,OAAOuB;AAAM;;AAeR,MAAMG,wBAAwB,CAACC,GAAoBC;IACxD,MAAMC,IAAeF,EAAME;IAC3B,MAAMC,IAAiBH,EAAMI;IAI7B,IAAIF,MAAiB,QAAQA,MAAiBD,GAAU;QACtD,OAAOE;AACR;IAKD,IAAID,EAAaG,SAASJ,IAAW;QACnC,OAAOE,IAAiBF,EAASG;AAClC;IAKD,OAAOD,IAAiBJ,sBAAsBG,GAAcD;AAAS;;ACrDvE,MAAMK,IAA8B;IAClCV,QAAQ;IACRW,WAAW;IACXN,UAAU;IACVO,OAAO;;;MAKIC;IA0CX,WAAAC;QA3BOC,KAAKC,aAAuC;QAOjBD,KAAAE,QAA0B;QAEnCF,KAAAG,OAAqB;QACrBH,KAAAI,IAAmCT;QAEnCK,KAAAK,IAAuB;QACxCL,KAAUM,aAAG;QACbN,KAAgBO,mBAAG;QAEnBP,KAAGQ,MAAsB;QACzBR,KAAgBS,mBAA6B;QAErCT,KAAAU,WAAWC,UAAQC,EAAAA;QACnBZ,KAAAa,cAAcF,UAAQG,EAAAA;QACtBd,KAAAe,SAASJ,UAAQK,EAAAA;QACChB,KAAQiB,IAAGN,UAAQO,EAAAA;QACnBlB,KAAgBmB,IAAGR,UAAQxD;QAC3B6C,KAAYoB,IAAGT,UAAQ5D;QACvBiD,KAAuBqB,0BAAGV,UAAQzD;QAGlE,MAAMoE,IAAsBtB,KAAKa,YAAYU,MAAM;QACnD,MAAMC,IAAQF,EAAoBE;QAClC,MAAMC,IAAWzB,KAAKyB,WAAWrE,iBAAiBoE,EAAMC,aAAaD,EAAMC;QAC3E,MAAMC,IAAoB1B,KAAK2B,IAAqBH,EAAMC,aAAaA;QACvEzB,KAAK4B,IAAe,IAAIC,8BAA8B7B,OAAM,MAAM0B,IAAoB1B,KAAK8B,MAAiC9B,KAAK+B;QACjI/B,KAAKgC,QAASR,EAAMS,YAAkCC;QACtDlC,KAAKmC,YAAYxB,EAAAA,QAAQyB,EAASA,WAAEC;AACrC;IAKM,SAAAC;QACLtC,KAAKQ,MAAMR,KAAKoB,EAAamB,OAAOvC,KAAKU;SACxCV,KAAKS,mBAAmBT,KAAKqB,wBAAwBmB,YAAYxC,KAAKQ,IAAIlB,WAAWmD,UAAUzC;QAGhGA,KAAK4B,EAAac,MAAM1C,KAAKC;QAC7BD,KAAK2C,qBAAqB3C,KAAKmB,EAAiByB,YAAY5C,KAAKC;QACjED,KAAK6C,EAAoB7C,KAAKC,OAAOD,KAAK2C;AAC3C;IAKM,SAAAG;QACL9C,KAAKG,MAAM4C;QACX/C,KAAKgD;QACLhD,KAAKQ,IAAIyC;QACTjD,KAAKS,iBAAkByC,YAAYlD;QACnCA,KAAK4B,EAAauB;QAElBnD,KAAKQ,MACDR,KAAKS,mBACLT,KAAKG,OACL;AACL;IAKO,CAAAiD;QACN,MAAMpD,KAAK2C,mBAAoBU,QAAQ,IAAI;YACzC,MAAM,IAAIrF,MAAM;AACjB;QACD,MAAMsF,IAAYtD,KAAKuD;QACvB,MAAMjD,IAAatB,gBAAgBsE,EAAUE,MAAMC;QACnD,MAAMC,IAAe1D,KAAKS,iBAAkBkD;QAC5C,MAAMC,IAAc5D,KAAK6D,EAAWH,GAAc1D,KAAK2C,mBAAoBU,OAAO/C;QAElF,IAAIsD,EAAYE,UAAO,GAAwB;YAC7C9D,KAAKgD;YACL,OAAOY;AACR;QACD,KAAKA,EAAYE,iBAAwC,GAAG;YAC1D9D,KAAKgD;YAGL,OAAOY;AACR;QAED5D,KAAKM,aAAaA;QAClBN,KAAKO,mBAAmBqD,EAAYG;QACpC/D,KAAKK,IAAuB;QAC5B,OAAOuD;AACR;IAKO,CAAAC,CAAWH,GAA6BM,GAAmB1D;QACjE,IAAI0D,MAAc,GAAG;YACnB,OAAOC,YAAYC;AACpB;QACD,IAAI5D,MAAe,GAAG;YACpB,OAAO2D,YAAYE;AACpB;QACD,MAAM5D,IAAmB6D,KAAKC,KAAKlF,2BAA2BuE,EAAapE,YAAYgB;QACvF,OAAO2D,YAAYK,KAA+B,GAAA/D;AACnD;IAKO,CAAAyC;QACNhD,KAAKK,IAAuB;QAC5BL,KAAKO,mBAAmB;QACxBP,KAAKM,aAAa;QAClBN,KAAKQ,IAAI+D,OAAO,GAAG;AACpB;IAGO,CAAA1B,CAAoB5C,GAAsC0C;QAChE,MAAM6B,IAAmBxE,KAAKyE;QAC9B,MAAMT,IAAYrB,EAAmBU;QACrC,MAAMnD,IAAQF,KAAKE;QAEnB,IAAIvB,IAAI;QACR,IAAI+F,IAAgBxE,EAAMrB;QAC1B,IAAI8F,IAA8B;QAElC,IAAIX,MAAc,GAAG;YAEnB,KAAKrF,IAAI,GAAG+F,IAAgB/F,KAAKA,GAAG;gBAClCgG,IAAOzE,EAAMvB;qBACRgG,EAAKC,WAAWD,GAAMH;AAC5B;YACDtE,EAAMrB,SAAS;YACfmB,KAAKgD;YACL;AACD;QAED,IAAIhD,KAAKK,GAAsB;YAC7B,MAAMuD,IAAc5D,KAAKoD;YACzB,IAAIQ,EAAYE,YAAO,MAA6BF,EAAYE,UAAkC,OAAM,GAAG;gBACzG;AACD;AAEF,eAAM;YAEL,IAAI9D,KAAKM,eAAe,GAAG;gBACzB;AACD;AACF;QAID,MAAMuE,IAAmB7E,KAAKO,mBAAmB;QACjD,MAAMuE,IAAgBV,KAAKW,IAAIF,GAAkBb;QACjD,IAAIU,IAAgBG,GAAkB;YACpC,OAAOH,IAAgBG,GAAkB;gBACvCF,IAAOzE,EAAMwE,IAAgB;qBACxBC,EAAKC,WAAWD,GAAMH;kBACzBE;AACH;YACDxE,EAAMrB,SAAS6F;AAChB;QACD,IAAIA,IAAgBV,GAAW;YAE7B,OAAOU,IAAgBV,GAAW;gBAChCW,IAAOzE,EAAMwE,IAAgB;qBACxBC,EAAKC,WAAWD,GAAMH;kBACzBE;AACH;YACDxE,EAAMrB,SAASmF;AAChB;QACDU,IAAgBxE,EAAMrB;QAEtB,KAAKF,IAAI+F,GAAe/F,IAAImG,GAAenG,KAAK;YAC9CuB,EAAM8E,KAAKhF,KAAKiB,EAASgE;AAC1B;QACD,MAAM3E,IAAaN,KAAKM;QACxB,MAAM0B,IAAQhC,KAAKgC;QACnB,OAAMkD,YACJA,GAAUC,UACVA,GAAQC,UACRA,KACEpF,KAAKqF,cAAcrF,KAAKS,iBAAkBkD,YAAYzD,EAAMrB,QAAQmF,GAAW1D;QAEnF,IAAIgF,IAAM;QACV,IAAIC;QACJ,IAAIC;QACJ,IAAIC;QAEJ,KAAK9G,IAAI,GAAGmG,IAAgBnG,KAAKA,GAAG;YAClC2G,IAAMJ,IAAavG;YACnB4G,IAAO5C,EAAmB4C,KAAKD;YAC/BX,IAAOzE,EAAMvB;YACb6G,IAAWtF,EAAMvB,IAAI;YACrB,IAAIgG,EAAKe,UAAU;gBACjBD,IAAQd,EAAKc;gBACbA,EAAME,eAAe3D,KAASuD;gBAC9BE,EAAMG,gBAAgBC,SAASP;gBAC/BG,EAAMG,gBAAgBE,UAAU9B;AACjC,mBAAM;gBACLW,EAAKnB,MAAMuC,aAAaP,EAAShC,MAAMC,WAAYuC;gBACnDP,IAAQQ,EAAKA,MAACC,WACZ1B,EAAiBiB,OACjB,IAAIU,iBAAenE,GAAOW,EAAmB4C,KAAKD;gBAEpDG,EAAMG,gBAAgBC,SAASP;gBAC/BG,EAAMG,gBAAgBE,UAAU9B;gBAChCoC,uBAAuBX,EAAMG;qBACxBjB,EAAK0B,SAAS7B,GAAkBA,GAAkBiB;AACxD;AACF;QAEDzF,KAAKQ,IAAI+D,OACPY,IAAW7E,GACX8E,IAAW9E;AAEd;IAGM,YAAAgG,CAAarG;QAClBD,KAAK4B,EAAac,MAAMzC;QACxBD,KAAK2C,qBAAqB3C,KAAKmB,EAAiByB,YAAY3C;QAC5DD,KAAKuG;AACN;IAUO,CAAAC,CAAmB9C;QACzB,MAAM+C,IAAsB/C,EAAa9D;QACzC,MAAM8G,IAAsBtH,sBAAsBY,KAAKQ,IAAImG,KAAKjD,EAAapE;QAC7E,MAAMsH,IAAkBxC,KAAKyC,IAAI,GAAGJ,MAAwB,IACxD,IACCA,IAAsBC;QAC3B,OAAOE;AACR;IAGO,aAAAvB,CAAc3B,GAA6BoD,GAAmBC,GAAwBzG;QAC5F,MAAMsG,IAAkB5G,KAAKwG,EAAmB9C;QAChD,IAAIsD,IAAsCJ,MAAoB,IAC1D,IACAxC,KAAK6C,MAAML,IAAkBtG;QAKjC,IAAI0G,IAAsCF,KAAaC,GAAgB;YACrEC,IAAsC5C,KAAKyC,IAAI,GAAGE,IAAiBD;AACpE;QACD,MAAMI,IAAgDF;QACtD,MAAMG,IAAgD/C,KAAKyC,IACzD,GACAE,IAAiBG,IAAgDJ;QAGnE,OAAO;YACL5B,YAAY8B;YACZ7B,UAAU+B;YACV9B,UAAU+B;;AAEb;IAEM,oBAAAC,CAAqB1D;QAC1B,MAAMvD,IAAOH,KAAKG;QAClBH,KAAKG,OAAOH,KAAKmC,UAAUkF,WAAU;YACnCrH,KAAKG,OAAO;YACZ,IAAIH,KAAKE,MAAMrB,SAAS,KAAKmB,KAAKM,aAAa,GAAG;gBAChDN,KAAKoD;gBACLpD,KAAKsH,aAAa5D;AACnB;AAAA;QAEHvD,GAAM4C;AACP;IAGO,YAAAuE,CAAa5D;QACnB,MAAM6D,IAAmBvH,KAAKI;QAC9B,MAAM4B,IAAQhC,KAAKgC;QACnB,MAAM1B,IAAaN,KAAKM;QACxB,MAAMkH,IAAYxH,KAAKQ;QACvB,MAAMN,IAAQF,KAAKE;QACnB,MAAMyC,IAAqB3C,KAAK2C;QAChC,MAAMmE,IAAY5G,EAAMrB;QACxB,MAAMkI,IAAiBpE,EAAmBU;QAC1C,MAAMoE,IAAkBvH,EAAM,GAAGuF,MAA6BG,gBAAgBC;QAC9E,OACEX,YAAYwC,GACZvC,UAAUwC,GACVvC,UAAUwC,KACR5H,KAAKqF,cAAc3B,GAAcoD,GAAWC,GAAgBzG;QAEhE,MAAMuH,IAAkBnE,EAAa9D,YAAY2H,EAAiB3H;QAClE,MAAMkI,IAAYD,IACdH,KAAkBD,IAAiBX,IACnCY,IAAiBZ,KAAaW;QAClCzH,KAAKI,IAAoBsD;QAEzB,IAAIgE,MAAmBD,GAAgB;YAarC;AACD;QAED,IAAI9C,IAA8B;QAClC,IAAIc,IAAmC;QACvC,IAAIH,IAAM;QACV,IAAIyC,IAAmB;QACvB,IAAIC,IAAe;QACnB,IAAIrJ,IAAI;QAER,IAAImJ,GAAW;YACb,KAAKnJ,IAAI,GAAGmI,IAAYnI,KAAKA,GAAG;gBAC9B2G,IAAMoC,IAAiB/I;gBACvB8G,IAAQvF,EAAMvB,GAAG8G;gBACjBA,EAAME,eAAe3D,KAASW,EAAmB4C,KAAKD;gBACtDG,EAAMG,gBAAgBC,SAASP;gBAC/BG,EAAMG,gBAAgBE,UAAUiB;AACjC;AACF,eAAM,IAAIc,GAAiB;YAC1BE,IAAmBL,IAAiBD;YACpC,OAAOM,IAAmB,GAAG;gBAC3BpD,IAAOzE,EAAM+H;gBACb3C,IAAMpF,EAAMA,EAAMrB,SAAS,GAAG4G,MAAMG,gBAAgB,YAAsB;gBAC1E1F,EAAM8E,KAAKL;gBACXc,IAAQd,EAAKc;gBACbA,EAAME,eAAe3D,KAASW,EAAmB4C,KAAKD;gBACtDG,EAAMG,gBAAgBC,SAASP;gBAC/BG,EAAMG,gBAAgBE,UAAUiB;gBAChCpC,EAAKnB,MAAMuC,aAAayB,EAAUU;kBAChCF;kBACAD;AACH;AACF,eAAM;YACLA,IAAmBN,IAAiBC;YACpC,OAAOK,IAAmB,GAAG;gBAC3BzC,IAAMmC,KAAkBO,IAAe;gBACvCrD,IAAOzE,EAAMiI;gBACb1C,IAAQd,EAAKc;gBACbA,EAAME,eAAe3D,KAASW,EAAmB4C,KAAKD;gBACtDG,EAAMG,gBAAgBC,SAASP;gBAC/BG,EAAMG,gBAAgBE,UAAUiB;gBAChCpC,EAAKnB,MAAMuC,aAAa7F,EAAM,GAAGsD,MAAMC;gBACvCvD,EAAMkI,QAAQzD;kBACZqD;kBACAD;AACH;AACF;QAED,IAAIF,GAAiB;YACnB,IAAIlF,EAAmB0F,aAAaX,KAAkBZ,IAAY;AAGnE,eAAM;YACL,IAAInE,EAAmB2F,UAAUpI,EAAM,GAAGuF,MAAMG,gBAAgB;AAGjE;QAED4B,EAAUjD,OACRoD,IAAYrH,GACZsH,IAAYtH;AAEf;IAEM,YAAAiI;QACL,OAAOvI,KAAKQ,KAAKgI,aAAa,EAAC,GAAG;AACnC;IAEM,QAAAC;QACL,OAAOzI,KAAKE,MAAMwI,MAAM;AACzB;IAOM,CAAA3G;QACL/B,KAAKuG;AACN;IAKM,CAAAzE;QACL,MAAM6G,IAAWC,EAAAA,YAAY5I,KAAKyB,UAAUzB,KAAKe,OAAO0E,OAAO;YAAEoD,QAAQ;WAAQ;QACjF,MAAMC,IAAW9I,KAAKC;QACtBD,KAAKC,QAAQ0I;QACb,IAAIA,MAAaG,GAAU;YACzB9I,KAAKuG;AACN;AACF;IAGO,CAAAA;QACN,MAAMpG,IAAOH,KAAKG;QAClBH,KAAKG,OAAOH,KAAKmC,UAAUkF,WAAU;YACnCrH,KAAKG,OAAO;YACZH,KAAK6C,EAAoB7C,KAAKC,OAAOD,KAAK2C;AAAoB;QAEhExC,GAAM4C;AACP;IAKO,CAAAQ;QACN,MAAMD,IAAYtD,KAAK+I;QACvB,KAAKzF,EAAUoC,UAAU;YACvB,MAAMlB,IAAmBxE,KAAKyE;YAC9B,MAAM9B,IAAqB3C,KAAK2C;YAChC,MAAMqG,IAAcxE,EAAiBiB;YACrC,MAAMwD,IAAYhD,EAAAA,MAAMC,WACtB8C,GACA,IAAI7C,EAAAA,eAAenG,KAAKgC,OAAOW,EAAmBuG;YAEpDD,EAAUrD,gBAAgBC,SAAS;YACnCoD,EAAUrD,gBAAgBE,UAAUnD,EAAmBU;YACvD+C,uBAAuB6C,EAAUrD;YACjCtC,EAAUE,MAAMuC,aAAa/F,KAAKQ,IAAI0H;iBAEjC5E,EAAU+C,SAAS/C,GAAWkB,GAAkByE;AACtD;QAED,OAAO3F;AACR;IAKO,oBAAAyF;QACN,MAAM7I,IAAQF,KAAKE;QACnB,IAAIA,EAAMrB,SAAS,GAAG;YACpB,OAAOqB,EAAM;AACd;QACD,MAAMyE,IAAO3E,KAAKiB,EAASgE;QAC3B/E,EAAM8E,KAAKL;QACX,OAAOA;AACR;;;AAvdsB7E,cAAAqJ,MAAyC;IAC9DC,MAAM;IACNlH,MAAM;IACNmH,sBAAsB;IACtBC,WAAW;QACTtH,OAAO;QACP/B,OAAO;YAAEsJ,SAAS;;;;;AAodxB,MAAM1H;IAGJ,WAAA9B,CACSyJ,GACAC;QADAzJ,KAAMwJ,SAANA;QACAxJ,KAAsByJ,yBAAtBA;AACJ;IAEE,KAAA/G,CAAMgH;QACX,IAAI1J,KAAK2J,MAAgBD,GAAG;YAC1B;AACD;QACD1J,KAAKmD;QACL,IAAIuG,KAAK,MAAM;YACbE,EAAqBA,sBAAC5J,KAAK2J,IAAcD,IAAIjH,UAAUzC;AACxD;AACF;IAEM,IAAAmD;QACLyG,EAAAA,sBAAsB5J,KAAK2J,IAAczG,YAAYlD;AACtD;;;AASH,IAAW6J;;CAAX,SAAWA;IACTA,EAAAA,EAAA,UAAA,KAAA;IACAA,EAAAA,EAAA,WAAA,KAAA;IACAA,EAAAA,EAAA,gBAAA,KAAA;AACD,EAJD,CAAWA,MAAAA,IAIV,CAAA;;AAOD,MAAM5F;IAIG,WAAOK,CAAKR,GAAwBC;QACzC,OAAO,IAAIE,YAAYH,GAASC;AACjC;IAED,WAAAhE,CACkB+D,GACAC;QADA/D,KAAO8D,UAAPA;QACA9D,KAAQ+D,WAARA;AACb;;;AAVkBE,YAAAC,QAAQ,IAAID,YAAiC,GAAA;;AAC7CA,YAAAE,OAAO,IAAIF,YAAgC,GAAA;;AA0BpE,MAAM6F,IAAwB,IAAIC;;AAClC,SAAS3D,uBAAuB4D;IAC9B,MAAMC,IAAMD;IACZ,IAAIF,EAAsBI,IAAID,IAAM;QAClC;AACD;IACDE,OAAOC,iBAAiBH,GAAK;QAC3BI,QAAQC,uBAAuBD;QAC/BE,OAAOD,uBAAuBC;QAC9BC,SAASF,uBAAuBE;QAChCC,OAAOH,uBAAuBG;QAC9BC,MAAMJ,uBAAuBI;;AAEjC;;AAEA,SAASJ,uBAAuBK;IAC9B,OAAO;QAAEC,cAAc;QAAMC,YAAY;QAAMC,KAAKH;;AACtD;;AAEA,SAASF;IACP,OAAOzK,KAAK6F,SAAS,MAAM;AAC7B;;AAEA,SAAS6E;IACP,OAAO1K,KAAK6F,SAAS,MAAM;AAC7B;;AAEA,SAASwE;IACP,OAAOrK,KAAK6F,WAAW;AACzB;;AAEA,SAAS0E;IACP,OAAOvK,KAAK6F,WAAW7F,KAAK8F,UAAU;AACxC;;AAEA,SAAS0E;IACP,OAAOxK,KAAK6F,SAAS,KAAK7F,KAAK6F,SAAU7F,KAAK8F,UAAU;AAC1D;;MCrnBaiF;IACJ,eAAOC,CAASC;QACrB,OAAOC,EAAAA,aAAaC,UAAUhO,GAA4B6C,MAAMgL,SAASC;AAC1E;IAEM,WAAArI,CAAY3C;QACjB,IAAIA,KAAS,MAAM;YACjB,OAAO,IAAImL;AACZ;QACD,IAAInL,aAAiBoL,OAAO;YAC1B,OAAO,IAAIC,wBAAwBrL;AACpC;QACD,MAAM,IAAIjC,MAAM,yDAAyDiC;AAC1E;;;AAGH,MAAMqL;IACJ,WAAAvL,CACkBwL;QAAAvL,KAAGuL,MAAHA;AAEjB;IAED,SAAWlI;QACT,OAAOrD,KAAKuL,IAAI1M;AACjB;IAEM,KAAAqK;QACL,OAAOlJ,KAAKqD,QAAQ,IAAIrD,KAAKuL,IAAI,KAAK;AACvC;IAEM,IAAAC;QACL,OAAOxL,KAAKqD,QAAQ,IAAIrD,KAAKuL,IAAIvL,KAAKqD,QAAQ,KAAK;AACpD;IAEM,IAAAkC,CAAKkG;QACV,OAAOzL,KAAKuL,IAAIE,MAAU;AAC3B;IAEM,KAAAC,CAAMhJ,GAAeiJ;QAC1B,MAAMJ,IAAMvL,KAAKuL;QACjB,MAAMK,IAAM5L,KAAKqD;QACjB,IAAIuI,IAAMlJ,KAASiJ,IAAMjJ,GAAO;YAC9B,OAAO6I,EAAI7C,MAAMhG,GAAOiJ;AACzB;QACD,OAAO;AACR;IAEM,SAAArD,CAAUmD;QAEf,OAAOA,IAAQ;AAChB;IAEM,YAAApD,CAAaoD;QAElB,OAAOA,IAAQzL,KAAKuL,IAAI1M,SAAS;AAClC;;;AAGH,MAAMuM;IAAN,WAAArL;QAESC,KAAGuL,MAAG;QACNvL,KAAKqD,QAAG;AAyBhB;IAvBQ,SAAAiF;QACL,OAAO;AACR;IAEM,YAAAD;QACL,OAAO;AACR;IAEM,KAAAa;QACL,OAAO;AACR;IAEM,IAAAsC;QACL,OAAO;AACR;IAEM,IAAAjG;QACL,OAAO;AACR;IAEM,KAAAmG;QACL,OAAO;AACR;;;MCpFUG;IACJ,iBAAWC;QAChB,OAAO,EAAC1J,EAASA;AAClB;IAEM,eAAO4I,CAASC;QACrB,OAAOC,EAAAA,aAAaC,UAAUjO,GAAyB8C,MAAMgL,SAASC;AACvE;IAKD,WAAAlL,CAAmBgM;QAHe/L,KAAKgM,QAA2C,IAAIC;QAIpFjM,KAAK+L,IAAIA;AACV;IAEM,WAAAvJ,CAAYlD;QACjB,MAAM0M,IAAQhM,KAAKgM;QACnB,IAAIE,IAAWF,EAAMlB,IAAIxL;QACzB,KAAK0M,EAAM9B,IAAI5K,IAAW;YACxB0M,EAAMG,IAAI7M,GAAU4M,IAAW,IAAIE,iBAAiBpM,KAAK+L,GAAGzM;AAC7D;QACD,OAAO4M;AACR;;;MAGUE;IAMX,WAAArM,CACkBgM,GACAzM;QADAU,KAAC+L,IAADA;QACA/L,KAAQV,WAARA;QANgBU,KAAIqM,OAA6B,IAAIC;QAC9CtM,KAAAuM,MAA8B;AAMlD;IAEG,KAAA7J;QACN1C,KAAKV,SAASkN,iBAAiB,UAAUxM;QACzC,MAAMyM,IAAqBC,uBAAuB1M,KAAK+L;QACvD,WAAWU,MAAuB,YAAY;aAC3CzM,KAAK2M,UAAU,IAAIF,GAAoBG;gBACtC,MAAMC,IAAS7M,KAAKuM;gBACpB,MAAMO,IAAS,IAAIC,gBAAgBH,EAAQ,GAAGI;gBAC9C,KAAKF,EAAOG,OAAOJ,IAAS;oBAC1B7M,KAAKuM,MAAMO;oBACX9M,KAAKkN;AACN;AAAA,iBAEAC,QAAQnN,KAAKV;AACjB;AACF;IAEO,IAAA6D;QACNnD,KAAKV,SAAS8N,oBAAoB,UAAUpN;QAC5CA,KAAK2M,SAASU;QACdrN,KAAK2M,eAAe;AACrB;IAEO,MAAAO;QACNlN,KAAKqM,KAAKiB,QAAQC,kBAAkBvN,KAAK2D;AAC1C;IAEM,QAAA6J;QACL,MAAM,IAAIxP,MAAM;AACjB;IAEM,QAAA2F;QACL,MAAMrE,IAAWU,KAAKV;QACtB,MAAMmO,IAAOnO,EAASJ;QACtB,OAAO,IAAIwO,aAAapO,GAAUA,EAASM,WAAW6N,EAAK5N,OAAO4N,EAAKxO;AACxE;IAGM,WAAA0O,CAAYC;QACjB5N,KAAKkN;AACN;IAEM,SAAAzK,CAAUoL;QACf,IAAI7N,KAAKqM,KAAKyB,SAAS,GAAG;YACxB9N,KAAK0C;AACN;QACD1C,KAAKqM,KAAK0B,IAAIF;AACf;IAEM,WAAA3K,CAAY2K;QACjB,MAAMxB,IAAOrM,KAAKqM;QAClB,IAAIA,EAAKnC,IAAI2D,MAAQxB,EAAKyB,SAAS,GAAG;YACpC9N,KAAKmD;AACN;QACDkJ,EAAK2B,OAAOH;AACb;;;AAIH,SAASN,iBAAsCM;IAC7CA,EAAIzG,qBAAqBpH;AAC3B;;AAEA,MAAM+M;IAMJ,WAAAhN,CACEkO;QAEAjO,KAAKkO,IAAID,EAAQtH;QACjB3G,KAAKmO,IAAIF,EAAQG;QACjBpO,KAAKqO,IAAIJ,EAAQpO;QACjBG,KAAKsO,IAAIL,EAAQhP;AAClB;IAEM,MAAAgO,CAAOV;QACZ,IAAIA,KAAO,MAAM;YACf,OAAO;AACR;QACD,OAAOvM,KAAKkO,MAAM3B,EAAI2B,KACjBlO,KAAKmO,MAAM5B,EAAI4B,KACfnO,KAAKqO,MAAM9B,EAAI8B,KACfrO,KAAKsO,MAAM/B,EAAI+B;AACrB;;;AAGH,MAAMZ;IACJ,WAAA3N,CACkBT,GACAM,GACAC,GACAZ;QAHAe,KAAQV,WAARA;QACAU,KAASJ,YAATA;QACAI,KAAKH,QAALA;QACAG,KAAMf,SAANA;AACb;;;AAGP,MAAMyN,yBAA0BX,KAAwCA,EAAE7N,OAAOqQ;;MCrIpEC;IAED,iBAAW1C;QAAW,OAAO,EAAC1J,EAAAA;AAAa;IAE9C,eAAO4I,CAASC;QACrB,OAAOC,EAAAA,aAAaC,UAAUpO,GAAciD,MAAMgL,SAASC;AAC5D;IAED,WAAAlL,CACYgM;QAAA/L,KAAC+L,IAADA;AACP;IAEE,MAAAxJ,CAAOkM;QACZ,MAAMC,IAAM1O,KAAK+L,EAAElO;QACnB,MAAMkD,IAAS0N,EAAO7Q;QAEtB,IAAImD,MAAW,MAAM;YACnB,MAAM,IAAI/C,MAAM;AACjB;QACD,IAAI2Q;QACJ,QAAQ5N,EAAO6N;UACb,KAAK;UACL,KAAK;UACL,KAAK;UACL,KAAK;YACHD,IAAY5I,aAAa2I,GAAK,MAAMD;YACpC,OAAO,IAAII,SAAS9N,EAAO+N,QAAQ,UAAWL,GAAQE,EAAU,IAAIA,EAAU;;UAChF,KAAK;UACL,KAAK;YAEHA,IAAY5I,aAAa2I,GAAK,OAAOD;YACrC,OAAO,IAAIM,QAAQhO,GAA4B0N,GAAQE,EAAU,IAAIA,EAAU;;UACjF;YACEA,IAAY5I,aAAa2I,GAAK,OAAOD;YACrC,OAAO,IAAIO,WAAWP,GAAQE,EAAU,IAAIA,EAAU;;AAE3D;;;AAGH,MAAMK;IAGJ,WAAAjP,CACkBkP,GACAtI,GACAuB;QAFAlI,KAAMiP,SAANA;QACAjP,KAAG2G,MAAHA;QACA3G,KAAMkI,SAANA;QALXlI,KAAEkP,KAAW;QACblP,KAAEmP,KAAW;AAKf;IAEL,YAAW7P;QACT,OAAO7B,mBAAmBuC,KAAKiP;AAChC;IAED,aAAWzG;QACT,OAAO,EAACxI,KAAKkP,IAAIlP,KAAKmP;AACvB;IAEM,MAAA5K,CAAOoC,GAAayI;QACzBpP,KAAK2G,IAAI1I,MAAMgB,SAAS,GAAGe,KAAKkP,KAAKvI;QACrC3G,KAAKkI,OAAOjK,MAAMgB,SAAS,GAAGe,KAAKmP,KAAKC;AACzC;IAEM,OAAAnM;QACLjD,KAAK2G,IAAI0I;QACTrP,KAAKkI,OAAOmH;AACb;;;AAGH,MAAMN,gBAAgBC;IACpB,WAAAjP,CACkBuP,GAChBL,GACAtI,GACAuB;QAEAqH,MAAMN,GAAQtI,GAAKuB;QALHlI,KAAIsP,OAAJA;AAMjB;IAED,YAAWhQ;QACT,OAAO7B,mBAAmBuC,KAAKsP;AAChC;;;AAGH,MAAMT,iBAAiBG;IACrB,WAAAjP,CACkByP,GAChBP,GACAtI,GACAuB;QAEAqH,MAAMN,GAAQtI,GAAKuB;QALHlI,KAAKwP,QAALA;AAMjB;IAED,YAAWlQ;QACT,OAAO7B,mBAAmBuC,KAAKwP;AAChC;;;AAGH,SAASzJ,aAAa2I,GAAee,GAAYhB;IAC/C,MAAM1N,IAAS0N,EAAO7Q;IACtB,OAAO,EACLmD,EAAOgF,aAAa2I,EAAIgB,cAAcD,IAAKhB,IAC3C1N,EAAOgF,aAAa2I,EAAIgB,cAAcD,IAAKhB;AAE/C;;ACrGa,MAAAkB,IAAgD;IAC3D,QAAA3E,CAASC;QACP,OAAOA,EAAUD,SACfa,yBACAd,2BACAyD,oBACA1O;AAEH;;;;;;;;;;;;;;;;;;;"}