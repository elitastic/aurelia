{"version":3,"file":"index.mjs","sources":["../../src/interfaces.ts","../../src/utilities-repeat.ts","../../src/utilities-dom.ts","../../src/virtual-repeat.ts","../../src/collection-strategy.ts","../../src/scroller-observer.ts","../../src/virtual-repeat-dom-renderer.ts","../../src/configuration.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["IDomRenderer","DI","createInterface","IScrollerObsererLocator","ICollectionStrategyLocator","unwrapExpression","expression","unwrapped","BindingBehaviorExpression","ValueConverterExpression","getScrollerElement","element","current","parentNode","document","body","hasOverflowScroll","Error","style","window","getComputedStyle","overflowY","overflow","getStyleValues","styles","currentStyle","value","styleValue","i","ii","length","parseFloat","isNaN","calcOuterHeight","height","getBoundingClientRect","getDistanceToScroller","child","scroller","offsetParent","childOffsetTop","offsetTop","contains","noScrollInfo","scrollTop","width","VirtualRepeat","constructor","location","instruction","parent","_factory","_container","platform","this","items","views","task","_currScrollerInfo","itemHeight","minViewsRequired","dom","scrollerObserver","iteratorInstruction","props","forOf","from","iterable","hasWrapExpression","_hasWrapExpression","_obsMediator","CollectionObservationMediator","local","declaration","name","taskQueue","domWriteQueue","inject","IRenderLocation","IInstruction","IController","IViewFactory","IContainer","IPlatform","attaching","container","collectionStrategyLocator","get","collectionStrategy","getStrategy","itemCount","count","repeatDom","render","firstView","_createAndActivateFirstView","getObserver","subscribe","_initCalculation","itemsChanged","detaching","cancel","_resetCalculation","dispose","unsubscribe","nodes","firstChild","scrollerInfo","getValue","calculation","_calculate","signals","minViews","Calculation","reset","none","Math","floor","controller","$controller","maxViewsRequired","currViewCount","view","deactivate","remove","realViewCount","min","push","create","firstIndex","topCount","botCount","measureBuffer","idx","item","prevView","scope","isActive","bindingContext","overrideContext","$index","$length","insertBefore","nextSibling","Scope","fromParent","BindingContext","enhanceOverrideContext","activate","start","update","calcRealScrollTop","scroller_scroll_top","top_buffer_distance","top","real_scroll_top","max","viewCount","collectionSize","first_index_after_scroll_adjustment","top_buffer_item_count_after_scroll_adjustment","bot_buffer_item_count_after_scroll_adjustment","handleScrollerChange","queueTask","handleScroll","prevScrollerInfo","prevFirstIndex","currFirstIndex","topCount1","botCount1","isScrollingDown","isJumping","viewsToMoveCount","idxIncrement","shift","bottom","pop","unshift","isNearBottom","isNearTop","getDistances","distances","getViews","slice","handleCollectionChange","_indexMap","_flags","handleInnerCollectionChange","newItems","evaluate","oldItems","getOrCreateFirstView","repeatController","parentScope","itemScope","first","customAttribute","isTemplateController","bindables","property","primary","repeat","key","indexMap","flags","c","_collection","stop","getCollectionObserver","SizingSignals","static","enhancedContextCached","WeakSet","context","ctx","has","Object","defineProperties","$first","createGetterDescriptor","$last","$middle","$even","$odd","getter","configurable","enumerable","CollectionStrategyLocator","Registration","singleton","register","NullCollectionStrategy","Array","ArrayCollectionStrategy","val","last","index","range","end","len","ScrollerObserverLocator","p","cache","WeakMap","observer","set","ScrollerObserver","subs","Set","geo","addEventListener","ResizeObserverCtor","getResizeObserverClass","sizeObs","entries","oldGeo","newGeo","ElementGeometry","contentRect","equals","notify","observe","removeEventListener","disconnect","forEach","notifySubscriber","setValue","rect","ScrollerInfo","handleEvent","_e","sub","size","add","delete","domRect","t","l","left","w","h","ResizeObserver","DefaultDomRenderer","target","doc","bufferEls","tagName","TableDom","closest","ListDom","DefaultDom","anchor","tH","bH","bot","list","super","table","el","createElement","DefaultVirtualRepeatConfiguration"],"mappings":"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"}