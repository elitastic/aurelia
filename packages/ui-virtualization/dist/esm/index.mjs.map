{"version":3,"file":"index.mjs","sources":["../../src/interfaces.ts","../../src/utilities-repeat.ts","../../src/utilities-dom.ts","../../src/virtual-repeat.ts","../../src/collection-strategy.ts","../../src/scroller-observer.ts","../../src/virtual-repeat-dom-renderer.ts","../../src/configuration.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["IDomRenderer","DI","createInterface","IScrollerObsererLocator","ICollectionStrategyLocator","unwrapExpression","expression","unwrapped","BindingBehaviorExpression","ValueConverterExpression","getScrollerElement","element","current","parentNode","document","body","hasOverflowScroll","Error","style","window","getComputedStyle","overflowY","overflow","getStyleValues","styles","currentStyle","value","styleValue","i","ii","length","parseFloat","isNaN","calcOuterHeight","height","getBoundingClientRect","calcScrollerViewportHeight","getDistanceToScroller","child","scroller","offsetParent","childOffsetTop","offsetTop","contains","noScrollInfo","scrollTop","width","VirtualRepeat","constructor","this","items","views","task","_currScrollerInfo","_needInitCalculation","itemHeight","minViewsRequired","dom","scrollerObserver","location","resolve","IRenderLocation","instruction","IInstruction","parent","IController","_factory","IViewFactory","_strategyLocator","_domRenderer","scrollerObserverLocator","iteratorInstruction","props","forOf","iterable","hasWrapExpression","_hasWrapExpression","_obsMediator","CollectionObservationMediator","_handleInnerCollectionChange","_handleCollectionChange","local","declaration","name","taskQueue","IPlatform","domWriteQueue","attaching","render","getObserver","subscribe","start","collectionStrategy","getStrategy","_handleItemsChanged","detaching","cancel","_resetCalculation","dispose","unsubscribe","stop","_initCalculation","count","firstView","_createAndActivateFirstView","nodes","firstChild","scrollerInfo","getValue","calculation","_calculate","signals","minViews","itemCount","Calculation","reset","none","Math","ceil","from","update","repeatController","$controller","currViewCount","view","deactivate","maxViewsRequired","realViewCount","min","push","create","firstIndex","topCount","botCount","measureBuffer","idx","item","prevView","scope","isActive","bindingContext","overrideContext","$index","$length","insertBefore","nextSibling","Scope","fromParent","BindingContext","enhanceOverrideContext","activate","itemsChanged","_queueHandleItemsChanged","_calcRealScrollTop","scroller_scroll_top","top_buffer_distance","top","real_scroll_top","max","viewCount","collectionSize","first_index_after_scroll_adjustment","floor","top_buffer_item_count_after_scroll_adjustment","bot_buffer_item_count_after_scroll_adjustment","handleScrollerChange","queueTask","handleScroll","prevScrollerInfo","repeatDom","prevFirstIndex","currFirstIndex","topCount1","botCount1","isScrollingDown","isJumping","viewsToMoveCount","idxIncrement","shift","bottom","pop","unshift","isNearBottom","isNearTop","getDistances","distances","getViews","slice","newItems","astEvaluate","strict","oldItems","getOrCreateFirstView","parentScope","itemScope","first","customAttribute","isTemplateController","bindables","property","primary","repeat","handleCollectionChange","c","_collection","getCollectionObserver","SizingSignals","static","enhancedContextCached","WeakSet","context","ctx","has","Object","defineProperties","$first","createGetterDescriptor","$last","$middle","$even","$odd","getter","configurable","enumerable","get","CollectionStrategyLocator","container","Registration","singleton","register","NullCollectionStrategy","Array","ArrayCollectionStrategy","val","last","index","range","end","len","ScrollerObserverLocator","inject","p","cache","WeakMap","observer","set","ScrollerObserver","subs","Set","geo","addEventListener","ResizeObserverCtor","getResizeObserverClass","sizeObs","entries","oldGeo","newGeo","ElementGeometry","contentRect","equals","notify","observe","removeEventListener","disconnect","forEach","notifySubscriber","setValue","rect","ScrollerInfo","handleEvent","_e","sub","size","add","delete","domRect","t","l","left","w","h","ResizeObserver","DefaultDomRenderer","target","doc","bufferEls","tagName","TableDom","closest","ListDom","DefaultDom","anchor","tH","bH","bot","remove","list","super","table","el","createElement","DefaultVirtualizationConfiguration"],"mappings":"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"}