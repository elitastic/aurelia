{"version":3,"file":"index.mjs","sources":["../../src/interfaces.ts","../../src/utilities-repeat.ts","../../src/utilities-dom.ts","../../src/virtual-repeat.ts","../../src/collection-strategy.ts","../../src/scroller-observer.ts","../../src/virtual-repeat-dom-renderer.ts","../../src/configuration.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["IDomRenderer","DI","createInterface","IScrollerObsererLocator","ICollectionStrategyLocator","unwrapExpression","expression","unwrapped","BindingBehaviorExpression","ValueConverterExpression","getScrollerElement","element","current","parentNode","document","body","hasOverflowScroll","Error","style","window","getComputedStyle","overflowY","overflow","getStyleValues","styles","currentStyle","value","styleValue","i","ii","length","parseFloat","isNaN","calcOuterHeight","height","getBoundingClientRect","getDistanceToScroller","child","scroller","offsetParent","childOffsetTop","offsetTop","contains","noScrollInfo","scrollTop","width","VirtualRepeat","constructor","location","instruction","parent","_factory","_container","platform","this","items","views","task","_currScrollerInfo","itemHeight","minViewsRequired","dom","scrollerObserver","iteratorInstruction","props","forOf","from","iterable","hasWrapExpression","_hasWrapExpression","_obsMediator","CollectionObservationMediator","local","declaration","name","taskQueue","domWriteQueue","inject","IRenderLocation","IInstruction","IController","IViewFactory","IContainer","IPlatform","attaching","container","collectionStrategyLocator","get","collectionStrategy","getStrategy","itemCount","count","repeatDom","render","firstView","_createAndActivateFirstView","getObserver","subscribe","_initCalculation","itemsChanged","detaching","cancel","_resetCalculation","dispose","unsubscribe","nodes","firstChild","scrollerInfo","getValue","calculation","_calculate","signals","minViews","Calculation","reset","none","Math","floor","controller","$controller","maxViewsRequired","currViewCount","view","deactivate","remove","realViewCount","min","push","create","firstIndex","topCount","botCount","measureBuffer","idx","item","prevView","scope","isActive","bindingContext","overrideContext","$index","$length","insertBefore","nextSibling","Scope","fromParent","BindingContext","enhanceOverrideContext","activate","start","update","calcRealScrollTop","scroller_scroll_top","top_buffer_distance","top","real_scroll_top","max","viewCount","collectionSize","first_index_after_scroll_adjustment","top_buffer_item_count_after_scroll_adjustment","bot_buffer_item_count_after_scroll_adjustment","handleScrollerChange","queueTask","handleScroll","prevScrollerInfo","prevFirstIndex","currFirstIndex","topCount1","botCount1","isScrollingDown","isJumping","viewsToMoveCount","idxIncrement","shift","bottom","pop","unshift","isNearBottom","isNearTop","getDistances","distances","getViews","slice","handleCollectionChange","_collection","_indexmap","handleInnerCollectionChange","newItems","evaluate","oldItems","getOrCreateFirstView","repeatController","parentScope","itemScope","first","customAttribute","isTemplateController","bindables","property","primary","repeat","key","collection","indexMap","c","stop","getCollectionObserver","SizingSignals","static","enhancedContextCached","WeakSet","context","ctx","has","Object","defineProperties","$first","createGetterDescriptor","$last","$middle","$even","$odd","getter","configurable","enumerable","CollectionStrategyLocator","Registration","singleton","register","NullCollectionStrategy","Array","ArrayCollectionStrategy","val","last","index","range","end","len","ScrollerObserverLocator","p","cache","WeakMap","observer","set","ScrollerObserver","subs","Set","geo","addEventListener","ResizeObserverCtor","getResizeObserverClass","sizeObs","entries","oldGeo","newGeo","ElementGeometry","contentRect","equals","notify","observe","removeEventListener","disconnect","forEach","notifySubscriber","setValue","rect","ScrollerInfo","handleEvent","_e","sub","size","add","delete","domRect","t","l","left","w","h","ResizeObserver","DefaultDomRenderer","target","doc","bufferEls","tagName","TableDom","closest","ListDom","DefaultDom","anchor","tH","bH","bot","list","super","table","el","createElement","DefaultVirtualRepeatConfiguration"],"mappings":"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"}