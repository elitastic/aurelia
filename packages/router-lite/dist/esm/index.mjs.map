{"version":3,"file":"index.mjs","sources":["../../src/events.ts","../../src/util.ts","../../src/validation.ts","../../src/router-events.ts","../../src/location-manager.ts","../../src/route.ts","../../src/route-expression.ts","../../src/viewport-agent.ts","../../src/route-tree.ts","../../src/router.ts","../../src/url-parser.ts","../../src/options.ts","../../src/instructions.ts","../../src/component-agent.ts","../../src/route-context.ts","../../../../node_modules/tslib/tslib.es6.js","../../src/resources/viewport.ts","../../src/resources/load.ts","../../src/resources/href.ts","../../src/configuration.ts","../../src/state-manager.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport default {\r\n    __extends,\r\n    __assign,\r\n    __rest,\r\n    __decorate,\r\n    __param,\r\n    __metadata,\r\n    __awaiter,\r\n    __generator,\r\n    __createBinding,\r\n    __exportStar,\r\n    __values,\r\n    __read,\r\n    __spread,\r\n    __spreadArrays,\r\n    __spreadArray,\r\n    __await,\r\n    __asyncGenerator,\r\n    __asyncDelegator,\r\n    __asyncValues,\r\n    __makeTemplateObject,\r\n    __importStar,\r\n    __importDefault,\r\n    __classPrivateFieldGet,\r\n    __classPrivateFieldSet,\r\n    __classPrivateFieldIn,\r\n};\r\n",null,null,null,null,null],"names":["error","logger","event","optionalParameters","map","p","String","getMessage","join","logAndThrow","err","Batch","constructor","_stack","_cb","head","this","_done","_next","_head","static","cb","_push","cur","_pop","_invoke","_continueWith","_start","mergeDistinct","prev","next","slice","merged","length","shift","prevVpa","context","vpa","every","m","i","findIndex","n","push","splice","tryStringify","value","JSON","stringify","Object","prototype","toString","call","ensureArrayOfStrings","ensureString","mergeURLSearchParams","source","other","clone","query","URLSearchParams","key","entries","append","isNotNullishOrTypeOrViewModel","isCustomElementViewModel","isPartialCustomElementDefinition","hasOwnProperty","isPartialChildRouteConfig","isPartialRedirectRouteConfig","isPartialViewportInstruction","expectType","expected","prop","Error","validateRouteConfig","config","parentPath","keys","path","Array","validateComponent","route","childPath","indexOf","validateRedirectRouteConfig","component","property","Promise","shallowEquals","a","b","getPrototypeOf","aKeys","bKeys","ii","AuNavId","Subscription","_events","_serial","_inner","_disposed","dispose","subscriptions","IRouterEvents","DI","createInterface","x","singleton","RouterEvents","_subscriptionSerial","_subscriptions","_ea","resolve","IEventAggregator","_logger","ILogger","scopeTo","publish","name","subscribe","callback","subscription","message","LocationChangeEvent","id","url","trigger","state","NavigationStartEvent","instructions","managedState","NavigationEndEvent","finalInstructions","NavigationCancelEvent","reason","NavigationErrorEvent","IBaseHref","ILocationManager","BrowserLocationManager","_eventId","root","_history","IHistory","_location","ILocation","_window","IWindow","_baseHref","_event","IRouterOptions","useUrlFragmentHash","startListening","addEventListener","stopListening","removeEventListener","handleEvent","getPath","pushState","title","addBaseHref","replaceState","pathname","search","hash","removeBaseHref","normalizeQuery","fullPath","base","href","endsWith","startsWith","basePath","normalizePath","start","end","index","noRoutes","emptyArray","defaultReentryBehavior","current","params","RouteConfig","_path","ceDfn","CustomElement","getDefinition","aliases","redirectTo","caseSensitive","transitionPlan","viewport","data","routes","fallback","nav","_configurationFromHookApplied","configOrPath","Type","reentryBehavior","defaultViewportName","children","_applyChildRouteConfig","parentConfig","_getTransitionPlan","plan","_applyFromConfigurationHook","instance","parent","routeNode","getRouteConfig","onResolve","_clone","_getFallback","viewportInstruction","isType","register","container","Route","Protocol","resource","keyFor","isConfigured","Metadata","hasOwn","configure","_create","define","getConfig","getOwn","target","resolveRouteConfiguration","routeable","isChild","instruction","ceDef","resolveCustomElementDefinition","$ceDef","type","routeConfig","createNavigationInstruction","find","_resolveLazy","TypedNavigationInstruction","create","terminal","ParserState","_rest","_input","_buffers","_bufferIndex","_index","_startsWith","values","rest","some","_consumeOptional","str","_append","_consume","_expect","msg","_ensureDone","_advance","char","_record","_playback","bufferIndex","buffers","buffer","_discard","ExpressionKind","cache","Map","RouteExpression","kind","isAbsolute","queryParams","fragment","result","get","set","_$parse","SegmentExpression","Empty","CompositeSegmentExpression","_parse","toInstructionTree","options","ViewportInstructionTree","_toInstructions","siblings","ScopedSegmentExpression","open","close","flatMap","left","right","SegmentGroupExpression","leftInstructions","rightInstructions","expression","ComponentExpression","ActionExpression","ViewportExpression","action","scoped","ViewportInstruction","parameterList","_toObject","ParameterListExpression","charAt","isParameter","isStar","isDynamic","parameterName","decodeURIComponent","expressions","ParameterExpression","expr","AST","freeze","ViewportRequest","viewportName","componentName","viewportAgentLookup","WeakMap","ViewportAgent","_currState","_state","_nextState","hostController","ctx","_isActive","_curCA","_nextCA","_$plan","_currNode","_nextNode","_currTransition","_cancellationPromise","_friendlyPath","viewportAgent","controller","Controller","getCachedOrThrow","_activateFromViewport","initiator","tr","ensureTransitionHasNotErrored","_activate","_unexpectedState","b1","_deactivateFromViewport","_deactivate","_handles","req","_isAvailable","$vp","reqVp","vp","usedBy","split","includes","_canUnload","guardsResult","node","b2","_handleError","_canLoad","_createComponentAgent","ca","allResolved","onResolveAll","residue","vi","createAndAppendNodes","getAvailableViewportAgents","reduce","acc","default","_unloading","ensureGuardsResultIsTrue","_loading","curCa","_run","_dispose","_processDynamicChildren","_swap","nodes","curCA","nextCA","existingChildren","filter","newChildren","_scheduleUpdate","_routeNode","_cancelUpdate","forEach","currentDeactivationPromise","nextDeactivationPromise","_endTransition","$state","label","erredWithUnknownRoute","$stateCache","stringifyState","flags","RouteNode","_tree","isInstructionsFinalized","_isInstructionsFinalized","finalPath","_originalInstruction","_viewport","_version","input","RESIDUE","_","originalInstruction","emptyQuery","emptyObject","contains","matchEndpoint","matchOriginalInstruction","nodeChildren","instructionChildren","j","jj","instructionChild","instructionEndpoint","recognizedRoute","endpoint","nodeChild","childEndpoint","equalsOrResidual","_appendChild","child","_setTree","_clearChildren","c","getTitle","separator","titleParts","computeAbsolutePath","isRoot","thisPath","toUrlComponent","tree","_finalizeInstruction","props","r","RouteTree","_finalizeInstructions","_mergeQuery","log","trace","childVI","rr","appendNode","createConfiguredNode","_generateViewportInstruction","newVi","collapse","recognize","noResidue","eagerResult","getFallbackViewportAgent","UnknownRouteError","rd","childRoutes","createFallbackNode","rc","addResidue","unshift","ced","originalVi","rt","handler","$handler","viWithVp","vpName","_resolveViewportAgent","router","IRouter","getRouteContext","childCtx","$node","origPath","parse","pathUrlParser","redirPath","origCur","redirCur","newSegs","origSeg","redirSeg","origDone","redirDone","newPath","Boolean","redirRR","childNode","$childNode","$RecognizedRoute","RecognizedRoute","Endpoint","ConfigurableRoute","isManagedState","isObject","toManagedState","navId","Transition","_erredWithUnknownRoute","prevInstructions","instructionsChanged","previousRouteTree","routeTree","promise","reject","ret","then","catch","Router","_ctx","_$ctx","_container","has","IRouteContext","_routeTree","NavigationOptions","currentTr","_currentTr","_instructions","isNavigating","_isNavigating","_navigated","_navigationId","_nextTr","_locationChangeSubscription","_hasTitleBuilder","IContainer","_p","IPlatform","_locationMgr","_vpaLookup","registerResolver","Registration","_resolveContext","RouteContext","performInitialNavigation","buildTitle","e","taskQueue","queueTask","routerOptions","historyStrategy","_enqueue","load","stop","instructionOrInstructions","createViewportInstructions","isActive","componentDefinition","componentInstance","parentRouteConfig","parentContext","$rdConfig","rdConfig","routeConfigLookup","routeContext","isVpInstr","$instruction","failedTr","lastTr","equals","restorePrevRT","restorePreviousRouteTreeOnError","$resolve","$reject","nextTr","_cancelNavigation","$nextTr","navigationContext","vit","rootCtx","suffix","updateNode","all","newUrl","toUrl","_urlParser","_getHistoryStrategy","updateTitle","_runNextTransition","titleSeparator","document","ParsedUrl","fragmentStart","rawFragment","queryStart","queryString","pathOrParsedUrl","encodeURIComponent","fragmentUrlParser","valueOrFuncToValue","valueOrFunc","RouterOptions","useHref","useNavigationModel","activeClass","typedInstruction","thisChildren","otherChildren","otherVp","recursive","thisPart","repeat","stringifyParams","childPart","numKeys","indexKeys","namedKeys","isArrayIndex","Number","indexKeyIdx","namedKey","hasContext","len","eagerVi","isFinalInstruction","parser","parentPaths","currentPath","toPath","definition","CustomElementDefinition","ComponentAgent","_instance","_controller","_routerOptions","lifecycleHooks","_canLoadHooks","canLoad","_loadHooks","loading","_canUnloadHooks","canUnload","_unloadHooks","unloading","_hasCanLoad","_hasLoad","_hasCanUnload","_hasUnload","activate","deactivate","hook","res","allowedEagerComponentTypes","isEagerInstruction","val","depth","_allResolved","_node","_prevNode","_vpa","navigationModel","_navigationModel","parentContainer","_router","_childViewportAgents","_childRoutesConfigured","_moduleLoader","IModuleLoader","createChild","IController","_hostControllerProvider","InstanceProvider","ctxProvider","_recognizer","RouteRecognizer","navModel","NavigationModel","_setIsActive","_processConfig","allPromises","childrenRoutes","hasNavModel","childRoute","_addRoute","rdResolution","_$addRoute","idx","noop","IAppRoot","viewModel","rootContainer","Node","for","searchParents","nodeName","$controller","isCustomElementController","agent","_printTree","prepare","task","$el","host","componentAgent","_registerViewport","_unregisterViewport","searchAncestor","_current","_continue","Reflect","add","raw","def","getAll","isCustomElementDefinition","defaultExport","firstNonDefaultExport","item","items","isConstructable","definitions","paths","throwError","recognizer","numPaths","errors","core","consumed","maxScore","getEndpoint","param","isOptional","pattern","replace","consumedKeys","fromEntries","vpAgents","viewports","_promise","NavigationRoute","_trees","trees","ep","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","d","decorate","defineProperty","ViewportCustomElement","_agent","hydrated","attaching","_parent","detaching","propStrings","bindable","customElement","LoadCustomAttribute","_el","INode","attribute","active","_href","_navigationEndListener","onClick","altKey","ctrlKey","shiftKey","metaKey","button","preventDefault","el","_isEnabled","hasAttribute","_activeClass","binding","valueChanged","_e","classList","toggle","unbinding","optional","removeAttribute","setAttribute","mode","primary","customAttribute","HrefCustomAttribute","_isExternal","_isInitialized","windowName","getAttribute","getRef","CustomAttribute","newValue","test","_onClick","noMultiBindings","RouterRegistration","DefaultComponents","ViewportCustomElementRegistration","LoadCustomAttributeRegistration","HrefCustomAttributeRegistration","DefaultResources","cachedCallback","__","window","URL","baseURI","AppTask","setRoot","activated","deactivated","RouterConfiguration","customize","ScrollState","_top","scrollTop","_left","scrollLeft","_restore","scrollTo","restoreState","HostElementState","_scrollStates","_save","elements","_has","IStateManager","ScrollStateManager","_cache","saveState","delete"],"mappings":"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"}