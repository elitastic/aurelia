{"version":3,"file":"index.cjs","sources":["../../src/events.ts","../../src/util.ts","../../src/validation.ts","../../src/options.ts","../../src/router-events.ts","../../src/location-manager.ts","../../src/route.ts","../../src/viewport-agent.ts","../../src/route-tree.ts","../../src/router.ts","../../src/route-expression.ts","../../src/instructions.ts","../../src/component-agent.ts","../../src/route-context.ts","../../../../node_modules/tslib/tslib.es6.js","../../src/resources/viewport.ts","../../src/resources/load.ts","../../src/resources/href.ts","../../src/configuration.ts","../../src/state-manager.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport default {\r\n    __extends,\r\n    __assign,\r\n    __rest,\r\n    __decorate,\r\n    __param,\r\n    __metadata,\r\n    __awaiter,\r\n    __generator,\r\n    __createBinding,\r\n    __exportStar,\r\n    __values,\r\n    __read,\r\n    __spread,\r\n    __spreadArrays,\r\n    __spreadArray,\r\n    __await,\r\n    __asyncGenerator,\r\n    __asyncDelegator,\r\n    __asyncValues,\r\n    __makeTemplateObject,\r\n    __importStar,\r\n    __importDefault,\r\n    __classPrivateFieldGet,\r\n    __classPrivateFieldSet,\r\n    __classPrivateFieldIn,\r\n};\r\n",null,null,null,null,null],"names":["error","logger","event","optionalParameters","map","p","String","getMessage","join","logAndThrow","err","Batch","constructor","_stack","_cb","head","this","_done","_next","_head","static","cb","_push","cur","_pop","_invoke","_continueWith","_start","mergeDistinct","prev","next","slice","merged","length","shift","prevVpa","context","vpa","every","m","i","findIndex","n","push","splice","tryStringify","value","JSON","stringify","Object","prototype","toString","call","ensureArrayOfStrings","ensureString","mergeURLSearchParams","source","other","clone","query","URLSearchParams","key","entries","append","isNotNullishOrTypeOrViewModel","isCustomElementViewModel","isPartialCustomElementDefinition","hasOwnProperty","isPartialChildRouteConfig","isPartialRedirectRouteConfig","isPartialViewportInstruction","expectType","expected","prop","Error","validateRouteConfig","config","parentPath","keys","path","Array","validateComponent","route","childPath","indexOf","validateRedirectRouteConfig","component","property","Promise","shallowEquals","a","b","getPrototypeOf","aKeys","bKeys","ii","valueOrFuncToValue","instructions","valueOrFunc","IRouterOptions","DI","createInterface","RouterOptions","useUrlFragmentHash","useHref","historyStrategy","buildTitle","useNavigationModel","activeClass","restorePreviousRouteTreeOnError","input","NavigationOptions","title","titleSeparator","queryParams","fragment","state","transitionPlan","routerOptions","_clone","_getHistoryStrategy","AuNavId","Subscription","_events","_serial","_inner","_disposed","dispose","subscriptions","IRouterEvents","x","singleton","RouterEvents","_subscriptionSerial","_subscriptions","_ea","resolve","IEventAggregator","_logger","ILogger","scopeTo","publish","name","subscribe","callback","subscription","message","LocationChangeEvent","id","url","trigger","NavigationStartEvent","managedState","NavigationEndEvent","finalInstructions","NavigationCancelEvent","reason","NavigationErrorEvent","IBaseHref","ILocationManager","BrowserLocationManager","_eventId","root","_history","IHistory","_location","ILocation","_window","IWindow","_baseHref","_event","startListening","addEventListener","stopListening","removeEventListener","handleEvent","getPath","pushState","addBaseHref","replaceState","pathname","search","hash","removeBaseHref","normalizeQuery","fullPath","base","href","endsWith","startsWith","basePath","normalizePath","start","end","index","noRoutes","emptyArray","defaultReentryBehavior","current","params","RouteConfig","_path","ceDfn","CustomElement","getDefinition","aliases","redirectTo","caseSensitive","viewport","data","routes","fallback","nav","_configurationFromHookApplied","configOrPath","Type","reentryBehavior","defaultViewportName","children","_applyChildRouteConfig","parentConfig","_getTransitionPlan","plan","_applyFromConfigurationHook","instance","parent","routeNode","getRouteConfig","onResolve","_getFallback","viewportInstruction","isType","register","container","Route","Protocol","resource","keyFor","isConfigured","Metadata","hasOwn","configure","_create","define","getConfig","getOwn","target","resolveRouteConfiguration","routeable","isChild","instruction","ceDef","resolveCustomElementDefinition","$ceDef","type","routeConfig","createNavigationInstruction","find","_resolveLazy","TypedNavigationInstruction","create","ViewportRequest","viewportName","componentName","viewportAgentLookup","WeakMap","ViewportAgent","_currState","_state","_nextState","hostController","ctx","_isActive","_curCA","_nextCA","_$plan","_currNode","_nextNode","_currTransition","_cancellationPromise","get","_friendlyPath","viewportAgent","controller","Controller","getCachedOrThrow","set","_activateFromViewport","initiator","tr","ensureTransitionHasNotErrored","_activate","_unexpectedState","b1","_deactivateFromViewport","_deactivate","_handles","req","_isAvailable","$vp","reqVp","vp","usedBy","split","includes","_canUnload","guardsResult","node","b2","_handleError","_canLoad","_createComponentAgent","ca","allResolved","onResolveAll","residue","vi","createAndAppendNodes","getAvailableViewportAgents","reduce","acc","default","ViewportInstruction","_unloading","ensureGuardsResultIsTrue","_loading","curCa","_run","_dispose","_processDynamicChildren","_swap","nodes","curCA","nextCA","existingChildren","filter","newChildren","_scheduleUpdate","options","_routeNode","_cancelUpdate","forEach","currentDeactivationPromise","nextDeactivationPromise","_endTransition","$state","label","erredWithUnknownRoute","State","$stateCache","Map","str","stringifyState","flags","RouteNode","_tree","isInstructionsFinalized","_isInstructionsFinalized","finalPath","_originalInstruction","_viewport","_version","RESIDUE","_","originalInstruction","freeze","emptyQuery","emptyObject","contains","matchEndpoint","matchOriginalInstruction","nodeChildren","instructionChildren","j","jj","instructionChild","instructionEndpoint","recognizedRoute","endpoint","nodeChild","childEndpoint","equalsOrResidual","some","_appendChild","child","_setTree","_clearChildren","c","getTitle","separator","titleParts","computeAbsolutePath","isRoot","thisPath","toUrlComponent","tree","_finalizeInstruction","props","r","RouteTree","_finalizeInstructions","ViewportInstructionTree","log","trace","childVI","rr","appendNode","createConfiguredNode","result","_generateViewportInstruction","newVi","collapse","recognize","noResidue","eagerResult","open","close","getFallbackViewportAgent","UnknownRouteError","rd","childRoutes","createFallbackNode","rc","addResidue","unshift","ced","originalVi","rt","handler","$handler","viWithVp","vpName","_resolveViewportAgent","router","IRouter","getRouteContext","childCtx","$node","origPath","RouteExpression","parse","redirPath","origCur","redirCur","newSegs","kind","origSeg","redirSeg","origDone","redirDone","left","right","isDynamic","parameterName","raw","newPath","Boolean","redirRR","childNode","$childNode","$RecognizedRoute","RecognizedRoute","Endpoint","ConfigurableRoute","isManagedState","isObject","toManagedState","navId","Transition","_erredWithUnknownRoute","prevInstructions","instructionsChanged","previousRouteTree","routeTree","promise","reject","ret","then","catch","Router","_ctx","_$ctx","_container","has","IRouteContext","_routeTree","currentTr","_currentTr","_instructions","isNavigating","_isNavigating","_navigated","_navigationId","_nextTr","_locationChangeSubscription","_hasTitleBuilder","IContainer","_p","IPlatform","_locationMgr","_vpaLookup","registerResolver","Registration","_resolveContext","RouteContext","performInitialNavigation","e","taskQueue","queueTask","_enqueue","load","stop","instructionOrInstructions","createViewportInstructions","isActive","componentDefinition","componentInstance","parentRouteConfig","parentContext","$rdConfig","rdConfig","routeConfigLookup","routeContext","isVpInstr","$instruction","failedTr","lastTr","equals","restorePrevRT","$resolve","$reject","nextTr","_cancelNavigation","$nextTr","navigationContext","vit","rootCtx","isAbsolute","suffix","updateNode","all","newUrl","toUrl","updateTitle","_runNextTransition","document","terminal","ParserState","_rest","_input","_buffers","_bufferIndex","_index","_startsWith","values","rest","_consumeOptional","_append","_consume","_expect","msg","_ensureDone","_advance","char","_record","_playback","bufferIndex","buffers","buffer","_discard","ExpressionKind","fragmentRouteExpressionCache","routeExpressionCache","fragmentIsRoute","cache","_$parse","fragmentStart","rawFragment","decodeURIComponent","queryStart","queryString","SegmentExpression","EMPTY","CompositeSegmentExpression","_parse","toInstructionTree","_toInstructions","siblings","ScopedSegmentExpression","flatMap","SegmentGroupExpression","leftInstructions","rightInstructions","expression","ComponentExpression","ActionExpression","ViewportExpression","action","scoped","parameterList","_toObject","ParameterListExpression","charAt","isParameter","isStar","expressions","ParameterExpression","expr","AST","typedInstruction","thisChildren","otherChildren","otherVp","recursive","stringifyParams","thisPart","repeat","childPart","indexKeys","namedKeys","isArrayIndex","Number","indexKeyIdx","namedKey","$options","hasContext","len","eagerVi","isFinalInstruction","parentPaths","currentPath","toPath","NavigationInstructionType","definition","CustomElementDefinition","ComponentAgent","_instance","_controller","_routerOptions","lifecycleHooks","_canLoadHooks","canLoad","_loadHooks","loading","_canUnloadHooks","canUnload","_unloadHooks","unloading","_hasCanLoad","_hasLoad","_hasCanUnload","_hasUnload","activate","deactivate","hook","res","allowedEagerComponentTypes","isEagerInstruction","val","depth","_allResolved","_node","_prevNode","_vpa","navigationModel","_navigationModel","parentContainer","_router","_childViewportAgents","_childRoutesConfigured","_moduleLoader","IModuleLoader","createChild","IController","_hostControllerProvider","InstanceProvider","ctxProvider","_recognizer","RouteRecognizer","navModel","NavigationModel","_setIsActive","_processConfig","allPromises","childrenRoutes","hasNavModel","childRoute","_addRoute","rdResolution","_$addRoute","idx","noop","IAppRoot","viewModel","rootContainer","Node","for","searchParents","nodeName","$controller","isCustomElementController","agent","_printTree","prepare","task","$el","host","componentAgent","_registerViewport","_unregisterViewport","searchAncestor","_current","_continue","Reflect","add","def","getAll","isCustomElementDefinition","defaultExport","firstNonDefaultExport","item","items","isConstructable","definitions","paths","throwError","recognizer","numPaths","errors","core","consumed","maxScore","getEndpoint","param","isOptional","pattern","replace","consumedKeys","fromEntries","vpAgents","viewports","_promise","NavigationRoute","_trees","trees","ep","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","d","decorate","defineProperty","ViewportCustomElement","_agent","hydrated","attaching","_parent","detaching","propStrings","bindable","customElement","LoadCustomAttribute","_el","INode","attribute","active","_href","_navigationEndListener","onClick","altKey","ctrlKey","shiftKey","metaKey","button","preventDefault","el","_isEnabled","hasAttribute","_activeClass","binding","valueChanged","_e","classList","toggle","unbinding","useHash","optional","removeAttribute","setAttribute","mode","primary","customAttribute","HrefCustomAttribute","_isExternal","_isInitialized","windowName","getAttribute","getRef","CustomAttribute","newValue","test","_onClick","noMultiBindings","RouterRegistration","DefaultComponents","ViewportCustomElementRegistration","LoadCustomAttributeRegistration","HrefCustomAttributeRegistration","DefaultResources","cachedCallback","__","window","URL","baseURI","AppTask","setRoot","activated","deactivated","RouterConfiguration","customize","ScrollState","_top","scrollTop","_left","scrollLeft","_restore","scrollTo","restoreState","HostElementState","_scrollStates","_save","elements","_has","IStateManager","ScrollStateManager","_cache","saveState","delete"],"mappings":"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"}