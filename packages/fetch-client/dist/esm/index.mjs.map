{"version":3,"file":"index.mjs","sources":["../../src/util.ts","../../src/retry-interceptor.ts","../../src/http-client-configuration.ts","../../src/http-client.ts"],"sourcesContent":[null,null,null,null],"names":["json","body","replacer","JSON","stringify","undefined","retryStrategy","fixed","incremental","exponential","random","defaultRetryConfig","maxRetries","interval","strategy","RetryInterceptor","constructor","retryConfig","this","Error","request","counter","requestClone","clone","response","Reflect","deleteProperty","responseError","error","httpClient","Promise","resolve","then","result","doRetry","delay","calculateDelay","setTimeout","isNaN","newRequest","beforeRetry","retryableRequest","fetch","minRandomInterval","maxRandomInterval","retryStrategies","retryCount","Math","HttpClientConfiguration","baseUrl","defaults","interceptors","dispatcher","withBaseUrl","withDefaults","withInterceptor","interceptor","push","useStandardConfiguration","standardConfig","credentials","Object","assign","rejectErrorResponses","rejectOnError","withRetry","config","withDispatcher","ok","absoluteUrlRegexp","IHttpClient","DI","createInterface","x","singleton","HttpClient","activeRequestCount","isRequesting","isConfigured","configure","normalizedConfig","requestInitConfiguration","c","prototype","isPrototypeOf","call","Headers","headers","length","filter","retryInterceptorIndex","findIndex","input","init","trackRequestStart","buildRequest","processRequest","Response","Request","processResponse","trackRequestEnd","requestContentType","parsedDefaultHeaders","parseHeaderValues","get","bodyObj","requestInit","getRequestUrl","has","set","isJSON","setDefaultHeaders","Blob","type","post","callFetch","put","patch","delete","evt","ownerDocument","defaultView","CustomEvent","bubbles","cancelable","dispatchEvent","applyInterceptors","successName","errorName","interceptorArgs","reduce","chain","successHandler","errorHandler","value","identity","reason","thrower","method","parsedHeaders","$headers","name","hasOwnProperty","url","test","defaultHeaders","$defaultHeaders","str","parse","err"],"mappings":"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"}