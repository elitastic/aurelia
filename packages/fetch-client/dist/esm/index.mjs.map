{"version":3,"file":"index.mjs","sources":["../../src/utilities-fetch-client.ts","../../src/interceptors/cache-interceptor/storage-memory.ts","../../src/interceptors/cache-interceptor/storage.ts","../../src/http-client-configuration.ts","../../src/http-client.ts","../../src/interceptors/cache-interceptor/cach-service.ts","../../src/interceptors/cache-interceptor/cache-interceptor.ts","../../src/interceptors/cache-interceptor/storage-browser-indexdb.ts","../../src/interceptors/cache-interceptor/storage-browser.ts","../../src/interceptors/cache-interceptor/storage-browser-local.ts","../../src/interceptors/cache-interceptor/storage-browser-session.ts","../../src/interceptors/retry-interceptor.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null],"names":["json","body","replacer","JSON","stringify","undefined","MemoryStorage","constructor","this","cache","Map","delete","key","has","set","value","get","clear","ICacheStorage","DI","createInterface","x","singleton","HttpClientConfiguration","baseUrl","defaults","interceptors","dispatcher","_container","resolve","IContainer","withBaseUrl","withDefaults","withInterceptor","interceptor","push","useStandardConfiguration","standardConfig","credentials","Object","assign","rejectErrorResponses","response","rejectOnError","withRetry","config","invoke","RetryInterceptor","withDispatcher","ok","absoluteUrlRegexp","IFetchFn","fetch","Error","instance","IHttpClient","aliasTo","HttpClient","activeRequestCount","isRequesting","isConfigured","_interceptors","_dispatcher","_createConfiguration","factory","_fetchFn","slice","configure","normalizedConfig","requestInitConfiguration","c","headers","Headers","length","filter","retryInterceptorIndex","findIndex","input","init","_trackRequestStart","request","buildRequest","processRequest","then","result","Response","Promise","Request","call","processResponse","_trackRequestEnd","error","requestContentType","parsedDefaultHeaders","parseHeaderValues","bodyObj","requestInit","getRequestUrl","isJSON","setDefaultHeaders","Blob","type","post","_callFetch","put","patch","dispose","forEach","i","dispatch","HttpClientEvent","started","drained","_applyInterceptors","successName","errorName","Type","interceptorArgs","reduce","chain","successHandler","errorHandler","identity","reason","thrower","method","parsedHeaders","$headers","name","keys","url","test","defaultHeaders","$defaultHeaders","str","parse","err","node","evt","ownerDocument","defaultView","CustomEvent","bubbles","cancelable","setTimeout","dispatchEvent","freeze","ICacheService","CacheService","CacheEvent","Set","Get","Clear","Reset","Dispose","CacheHit","CacheMiss","CacheStale","CacheStaleRefreshed","CacheExpired","CacheBackgroundRefreshed","CacheBackgroundRefreshing","CacheBackgroundStopped","storage","_platform","IPlatform","ea","IEventAggregator","_httpClient","_subscribedEvents","_interval","_timeouts","_requestMap","subscribe","event","callback","sub","subscribeOnce","setStaleTimer","staleTime","timeoutId","async","getItem","publish","_clearTimeout","startBackgroundRefresh","timer","setInterval","req","stopBackgroundRefresh","clearInterval","options","cacheItem","data","setItem","lastCached","Date","now","cacheTime","clearTimeout","id","idx","indexOf","splice","defaultCacheConfig","refreshStaleImmediate","refreshInterval","CacheInterceptor","_cacheService","_config","mark","cacheHeader","prefix","BrowserIndexDBStorage","globalThis","indexedDB","getStore","database","transaction","cacheName","objectStore","store","count","getAllKeys","open","BrowserStorage","removeItem","some","startsWith","BrowserLocalStorage","super","localStorage","BrowserSessionStorage","sessionStorage","RetryStrategy","fixed","incremental","exponential","random","defaultRetryConfig","maxRetries","interval","strategy","retryConfig","p","counter","requestClone","clone","responseError","httpClient","doRetry","delay","calculateDelay","isNaN","newRequest","beforeRetry","retryableRequest","minRandomInterval","maxRandomInterval","retryStrategies","retryCount","Math"],"mappings":"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"}