{"version":3,"file":"index.cjs","sources":["../../src/state-utilities.ts","../../src/interfaces.ts","../../src/action-handler.ts","../../src/interfaces-devtools.ts","../../src/store.ts","../../src/state-binding.ts","../../src/state-binding-behavior.ts","../../src/state-dispatch-binding.ts","../../src/state-templating.ts","../../src/configuration.ts","../../src/state-getter-binding.ts","../../src/state-decorator.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null],"names":["createInterface","DI","createStateBindingScope","state","scope","overrideContext","bindingContext","stateScope","Scope","create","parent","isSubscribable","v","Object","IActionHandler","IStore","IState","actionHandlerSymbol","ActionHandler","freeze","define","actionHandler","registry","action","register","c","Registration","instance","isType","r","IDevToolsExtension","x","cachedCallback","container","win","get","IWindow","devToolsExtension","__REDUX_DEVTOOLS_EXTENSION__","Store","singleton","this","aliasTo","constructor","_subs","Set","_dispatching","_dispatchQueues","_initialState","_state","resolve","optional","State","_handlers","all","_logger","ILogger","_getDevTools","lazy","subscribe","subscriber","add","unsubscribe","delete","_setState","prevState","forEach","sub","handleStateChange","getState","dispatch","push","$$action","reduce","$state","$action","handler","Promise","then","$","afterDispatch","length","shift","newState","ex","connectDevTools","options","extension","hasDevTools","Error","name","devTools","connect","init","message","info","payload","tryParseJson","type","catch","send","JSON","parse","parsedState","str","console","log","slice","undefined","atLayout","AccessorType","Layout","stateActivating","activating","StateBinding","controller","locator","observerLocator","taskQueue","ast","target","prop","store","isBound","_task","_value","_sub","_updateCount","boundFn","mode","BindingMode","toView","_controller","l","_taskQueue","_store","oL","targetProperty","updateTarget","value","targetAccessor","_targetObserver","updateCount","isCurrentValue","_unsub","$value","setValue","bind","_scope","getAccessor","astEvaluate","oneTime","unbind","cancel","handleChange","newValue","shouldQueueFlush","obsRecord","obs","version","clear","task","queueTask","updateTaskOpts","dispose","reusable","preempt","connectable","mixinAstEvaluator","mixingBindingLimited","bindingStateSubscriberMap","WeakMap","StateBindingBehavior","binding","isStateBinding","set","StateSubscriber","_wrappedScope","useScope","BindingBehavior","_binding","StateDispatchBinding","expr","_target","_targetProperty","callSource","e","$event","handleEvent","astBind","addEventListener","astUnbind","removeEventListener","StateAttributePattern","rawName","rawValue","parts","AttrSyntax","DispatchAttributePattern","StateBindingCommand","ignoreAttr","build","parser","attrMapper","attr","camelCase","bindable","map","node","StateBindingInstruction","$au","DispatchBindingCommand","DispatchBindingInstruction","from","to","StateBindingInstructionRenderer","renderer","_stateContainer","render","renderingCtrl","instruction","platform","exprParser","addBinding","domWriteQueue","ensureExpression","DispatchBindingInstructionRenderer","srcOrExpr","expressionType","standardRegistrations","createConfiguration","initialState","actionHandlers","AppTask","creating","IContainer","devToolsOptions","disable","optionsOrHandler","isHandler","StateDefaultConfiguration","StateGetterBinding","getValue","$get","key","fromState","context","kind","dependencies","metadata","dependenciesKey","HydratingLifecycleHooks","CreatedLifecycleHooks","Protocol","annotation","keyFor","ILifecycleHooks","hydrating","vm","vmKind","LifecycleHooks","created"],"mappings":"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"}