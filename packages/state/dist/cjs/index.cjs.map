{"version":3,"file":"index.cjs","sources":["../../src/state-utilities.ts","../../src/interfaces.ts","../../src/action-handler.ts","../../src/interfaces-devtools.ts","../../src/store.ts","../../src/state-binding.ts","../../src/state-binding-behavior.ts","../../src/state-dispatch-binding.ts","../../src/state-templating.ts","../../src/configuration.ts","../../src/state-getter-binding.ts","../../src/state-decorator.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null],"names":["createInterface","DI","createStateBindingScope","state","scope","overrideContext","bindingContext","stateScope","Scope","create","parent","isSubscribable","v","Object","IActionHandler","IStore","IState","actionHandlerSymbol","ActionHandler","freeze","define","actionHandler","registry","action","register","c","Registration","instance","isType","r","IDevToolsExtension","x","cachedCallback","container","win","get","IWindow","devToolsExtension","__REDUX_DEVTOOLS_EXTENSION__","Store","singleton","this","aliasTo","constructor","_subs","Set","_dispatching","_dispatchQueues","_initialState","_state","resolve","optional","State","_handlers","all","_logger","ILogger","_getDevTools","lazy","subscribe","subscriber","add","unsubscribe","delete","_setState","prevState","forEach","sub","handleStateChange","getState","dispatch","push","$$action","reduce","$state","$action","handler","Promise","then","$","afterDispatch","length","shift","newState","ex","connectDevTools","options","extension","hasDevTools","Error","name","devTools","connect","init","message","info","payload","tryParseJson","type","catch","send","JSON","parse","parsedState","str","console","log","slice","undefined","atLayout","AccessorType","Layout","stateActivating","activating","StateBinding","controller","locator","observerLocator","taskQueue","ast","target","prop","store","isBound","_task","_value","_sub","_updateCount","boundFn","mode","BindingMode","toView","_controller","l","_taskQueue","_store","oL","targetProperty","updateTarget","value","targetAccessor","_targetObserver","updateCount","isCurrentValue","_unsub","$value","setValue","bind","_scope","getAccessor","astEvaluate","oneTime","unbind","cancel","handleChange","newValue","shouldQueueFlush","obsRecord","obs","version","clear","task","queueTask","updateTaskOpts","dispose","reusable","preempt","connectable","mixinAstEvaluator","mixingBindingLimited","bindingStateSubscriberMap","WeakMap","StateBindingBehavior","binding","isStateBinding","set","StateSubscriber","_wrappedScope","useScope","BindingBehavior","_binding","StateDispatchBinding","expr","_target","_targetProperty","callSource","e","$event","handleEvent","astBind","addEventListener","astUnbind","removeEventListener","StateBindingCommand","ignoreAttr","build","parser","attrMapper","attr","rawValue","camelCase","bindable","map","node","StateBindingInstruction","$au","DispatchBindingCommand","DispatchBindingInstruction","from","to","StateBindingInstructionRenderer","renderer","_stateContainer","render","renderingCtrl","instruction","platform","exprParser","ensureExpression","addBinding","domQueue","DispatchBindingInstructionRenderer","srcOrExpr","expressionType","standardRegistrations","createConfiguration","initialState","actionHandlers","AppTask","creating","IContainer","devToolsOptions","disable","optionsOrHandler","isHandler","StateDefaultConfiguration","StateGetterBinding","getValue","$get","key","fromState","context","kind","dependencies","metadata","dependenciesKey","HydratingLifecycleHooks","CreatedLifecycleHooks","Protocol","annotation","keyFor","ILifecycleHooks","hydrating","vm","vmKind","LifecycleHooks","created"],"mappings":"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"}