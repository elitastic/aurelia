{"version":3,"file":"index.cjs","sources":["../../src/utilities.ts","../../src/interfaces.ts","../../src/subscriber-batch.ts","../../src/subscriber-collection.ts","../../src/errors.ts","../../src/collection-length-observer.ts","../../src/array-observer.ts","../../src/set-observer.ts","../../src/map-observer.ts","../../src/connectable.ts","../../src/connectable-switcher.ts","../../src/proxy-observation.ts","../../src/computed-observer.ts","../../src/dirty-checker.ts","../../src/primitive-observer.ts","../../src/property-accessor.ts","../../src/setter-observer.ts","../../src/observer-locator.ts","../../src/effect-runner.ts","../../src/observable.ts","../../src/proxy-decorators.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"names":["hasOwnProp","Object","prototype","hasOwnProperty","rtDef","Reflect","defineProperty","rtDefineHiddenProp","obj","key","value","enumerable","configurable","writable","ensureProto","proto","defaultValue","rtObjectAssign","assign","rtObjectFreeze","freeze","rtSafeString","String","rtCreateInterface","DI","createInterface","rtGetMetadata","Metadata","get","rtDefineMetadata","define","ICoercionConfiguration","atNone","atObserver","atNode","atLayout","AccessorType","None","Observer","Node","Layout","copyIndexMap","existing","deletedIndices","deletedItems","length","arr","Array","i","slice","isIndexMap","createIndexMap","cloneIndexMap","indexMap","clone","isArray","currBatch","Map","batching","batch","fn","prevBatch","newBatch","pair","subs","batchRecord","col","hasChanges","ii","has","set","notify","notifyCollection","addCollectionBatch","collection","addValueBatch","newValue","oldValue","subscriberCollection","target","context","subscriberCollectionDeco","getSubscriberRecord","this","SubscriberRecord","addSubscriber","subscriber","add","removeSubscriber","remove","decoratedTarget","WeakSet","constructor","count","_subs","includes","idx","indexOf","splice","val","oldVal","len","handleChange","handleCollectionChange","createMappedError","code","details","Error","padStart","map","CollectionLengthObserver","owner","type","_value","_obj","getValue","setValue","Number","isNaN","_arr","_","implementLengthObserver","CollectionSizeObserver","size","_collection","klass","subscribe","unsubscribe","getArrayObserver","lookupMetadataKey","Symbol","for","observerLookup","WeakMap","sortCompare","x","y","toString","preSortCompare","insertionSort","from","to","compareFn","velement","ielement","vtmp","itmp","order","j","quickSort","thirdIndex","v0","v1","v2","i0","i1","i2","c01","c02","c12","vpivot","ipivot","lowEnd","highStart","vtopElement","partition","methods","observe","overrideArrayPrototypes","$push","push","$unshift","unshift","$pop","pop","$shift","shift","$splice","$reverse","reverse","$sort","sort","args","o","apply","argCount","inserts","call","element","index","start","deleteCount","relativeStart","actualStart","Math","max","min","actualDeleteCount","itemCount","deleted","middle","lower","upper","lowerValue","lowerIndex","upperValue","upperIndex","isFunction","shouldNotify","method","enableArrayObservationCalled","observationEnabledKey","enableArrayObservation","undefined","observing","ArrayObserverImpl","array","indexObservers","lenObs","getLengthObserver","getIndexObserver","ArrayIndexObserverImpl","doNotCache","arrayObserver","noChange","prevValue","currValue","observer","getSetObserver","Set","$add","clear","$clear","delete","$delete","oldSize","newSize","keys","entry","deleteResult","enableSetObservation","SetObserverImpl","observedSet","getMapObserver","$set","entries","enableMapObservation","MapObserverImpl","connectableDecorator","BindingObserverRecord","b","version","forEach","unsubscribeStale","clearAll","unsubscribeAll","subscribable","getObserverRecord","obs","oL","getObserver","observeCollection","isSet","isMap","subscribeTo","noopHandleChange","noopHandleCollectionChange","connectable","_connectable","connectables","connecting","pauseConnecting","resumeConnecting","currentConnectable","enterConnectable","exitConnectable","ConnectableSwitcher","current","enter","exit","pause","resume","R$get","toStringTag","proxyMap","nowrapClassKey","nowrapPropKey","canWrap","rawKey","wrap","v","getProxy","createProxy","getRaw","unwrap","doNotCollect","object","toPrimitive","handler","arrayHandler","collectionHandler","objectHandler","proxiedObj","Proxy","receiver","wrappedArrayMap","wrappedArrayIncludes","wrappedArrayIndexOf","wrappedArrayLastIndexOf","wrappedArrayEvery","wrappedArrayFilter","wrappedArrayFind","wrappedArrayFindIndex","wrappedArrayFlat","wrappedArrayFlatMap","wrappedArrayJoin","wrappedArrayPush","wrappedArrayPop","wrappedReduce","wrappedReduceRight","wrappedArrayReverse","wrappedArrayShift","wrappedArrayUnshift","wrappedArraySlice","wrappedArraySplice","wrappedArraySome","wrappedArraySort","wrappedKeys","iterator","wrappedValues","wrappedEntries","ownKeys","cb","thisArg","raw","res","every","filter","lastIndexOf","findIndex","find","flat","flatMap","separator","join","_args","some","end","initValue","reduce","curr","reduceRight","wrappedClear","wrappedDelete","wrappedForEach","wrappedAdd","wrappedGet","wrappedSet","wrappedHas","k","next","done","values","ProxyObservable","ComputedObserver","observerLocator","useProxy","_isRunning","_isDirty","_callback","_coercer","_coercionConfig","_wrapped","$get","init","compute","areEqual","run","useCoercer","coercer","coercionConfig","useCallback","callback","IDirtyChecker","DirtyCheckSettings","timeoutsPerCheck","disabled","throw","resetToDefault","DirtyChecker","register","c","Registration","singleton","aliasTo","tracked","_task","_elapsedFrames","p","resolve","IPlatform","check","isDirty","flush","DirtyCheckProperty","createProperty","addProperty","property","taskQueue","queueTask","persistent","removeProperty","cancel","dirtyChecker","_oldValue","_dirtyChecker","_v","PrimitiveObserver","_key","PropertyAccessor","SetterObserver","_observing","oV","stop","propertyAccessor","IObserverLocator","ObserverLocator","INodeObserverLocator","cachedCallback","DefaultNodeObserverLocator","handles","getAccessor","IComputedObserverLocator","DefaultLocator","pd","requestor","_adapters","_nodeObserverLocator","_computedObserverLocator","addAdapter","adapter","isObject","lookup","getObserverLookup","createObserver","cached","$observers","observedArray","observedMap","isArrayIndex","getOwnPropDesc","getProto","_getAdapterObserver","getCollectionObserver","getPrototypeOf","getOwnPropertyDescriptor","instance","createLookup","IObservation","Observation","inject","_defaultWatchOptions","immediate","effect","RunEffect","watch","getter","options","$oldValue","stopped","maxRunCount","queued","running","runCount","observable","getObserversLookup","noValue","targetOrConfig","SetterNotifier","mixed","isClassDecorator","config","name","emptyObject","arguments","kind","createFieldInitializer","createDescriptor","$initialValue","addInitializer","initialValue","targetIsClass","observableGetter","notifier","getNotifier","descriptor","callbackKey","_setter","_hasSetter","nowrap","decorator"],"mappings":"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"}