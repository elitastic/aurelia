{"version":3,"file":"index.mjs","sources":["../../src/utilities.ts","../../src/observation.ts","../../src/observation/subscriber-batch.ts","../../src/observation/subscriber-collection.ts","../../src/errors.ts","../../src/observation/collection-length-observer.ts","../../src/observation/array-observer.ts","../../src/observation/set-observer.ts","../../src/observation/map-observer.ts","../../src/observation/connectable.ts","../../src/observation/scope.ts","../../src/observation/connectable-switcher.ts","../../src/observation/proxy-observation.ts","../../src/observation/computed-observer.ts","../../src/observation/dirty-checker.ts","../../src/observation/primitive-observer.ts","../../src/observation/property-accessor.ts","../../src/observation/setter-observer.ts","../../src/observation/observer-locator.ts","../../src/observation/effect-runner.ts","../../src/observation/observable.ts","../../src/observation/proxy-decorators.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"names":["O","Object","hasOwnProp","prototype","hasOwnProperty","def","Reflect","defineProperty","createError","message","Error","isFunction","v","isObject","isArray","Array","isSet","Set","isMap","Map","areEqual","is","defineHiddenProp","obj","key","value","enumerable","configurable","writable","ensureProto","proto","defaultValue","objectAssign","assign","objectFreeze","freeze","safeString","String","createInterface","DI","createLookup","create","getMetadata","Metadata","get","defineMetadata","define","ICoercionConfiguration","atNone","atObserver","atNode","atLayout","AccessorType","None","Observer","Node","Layout","copyIndexMap","existing","deletedIndices","deletedItems","length","arr","i","slice","isIndexMap","createIndexMap","cloneIndexMap","indexMap","clone","currBatch","batching","batch","fn","prevBatch","newBatch","pair","subs","batchRecord","col","hasChanges","ii","has","set","notify","notifyCollection","addCollectionBatch","collection","addValueBatch","newValue","oldValue","subscriberCollection","target","subscriberCollectionDeco","getSubscriberRecord","this","SubscriberRecord","addSubscriber","subscriber","add","removeSubscriber","remove","decoratedTarget","WeakSet","constructor","count","_subs","includes","idx","indexOf","splice","val","oldVal","len","handleChange","handleCollectionChange","createMappedError","code","details","padStart","map","CollectionLengthObserver","owner","type","_value","_obj","getValue","setValue","Number","isNaN","_arr","_","CollectionSizeObserver","size","_collection","implementLengthObserver","klass","subscribe","unsubscribe","lookupMetadataKey","Symbol","for","observerLookup","WeakMap","sortCompare","x","y","toString","preSortCompare","insertionSort","from","to","compareFn","velement","ielement","vtmp","itmp","order","j","quickSort","thirdIndex","v0","v1","v2","i0","i1","i2","c01","c02","c12","vpivot","ipivot","lowEnd","highStart","vtopElement","partition","methods","observe","native","overrideArrayPrototypes","$push","push","$unshift","unshift","$pop","pop","$shift","shift","$splice","$reverse","reverse","$sort","sort","args","o","apply","argCount","inserts","call","element","index","start","deleteCount","relativeStart","actualStart","Math","max","min","actualDeleteCount","itemCount","deleted","middle","lower","upper","lowerValue","lowerIndex","upperValue","upperIndex","shouldNotify","method","enableArrayObservationCalled","observationEnabledKey","enableArrayObservation","undefined","observing","disableArrayObservation","ArrayObserver","array","indexObservers","lenObs","getLengthObserver","getIndexObserver","ArrayIndexObserver","doNotCache","arrayObserver","noChange","prevValue","currValue","getArrayObserver","observer","$add","$clear","clear","$delete","delete","oldSize","newSize","keys","entry","deleteResult","descriptorProps","enableSetObservationCalled","enableSetObservation","disableSetObservation","SetObserver","observedSet","getSetObserver","$set","entries","enableMapObservationCalled","enableMapObservation","disableMapObservation","MapObserver","getMapObserver","BindingObserverRecord","b","version","forEach","unsubscribeStale","clearAll","unsubscribeAll","subscribable","connectableDecorator","getObserverRecord","obs","oL","getObserver","observeCollection","subscribeTo","noopHandleChange","noopHandleCollectionChange","_context","connectable","context","BindingContext","Scope","parent","bindingContext","overrideContext","isBoundary","getContext","scope","name","ancestor","currentScope","bc","oc","OverrideContext","fromParent","ps","_connectable","connectables","connecting","pauseConnecting","resumeConnecting","currentConnectable","enterConnectable","exitConnectable","ConnectableSwitcher","current","enter","exit","pause","resume","R$get","toStringTag","proxyMap","nowrapClassKey","nowrapPropKey","canWrap","rawKey","wrap","getProxy","createProxy","getRaw","unwrap","doNotCollect","object","toPrimitive","handler","arrayHandler","collectionHandler","objectHandler","proxiedObj","Proxy","receiver","wrappedArrayMap","wrappedArrayIncludes","wrappedArrayIndexOf","wrappedArrayLastIndexOf","wrappedArrayEvery","wrappedArrayFilter","wrappedArrayFind","wrappedArrayFindIndex","wrappedArrayFlat","wrappedArrayFlatMap","wrappedArrayJoin","wrappedArrayPush","wrappedArrayPop","wrappedReduce","wrappedReduceRight","wrappedArrayReverse","wrappedArrayShift","wrappedArrayUnshift","wrappedArraySlice","wrappedArraySplice","wrappedArraySome","wrappedArraySort","wrappedKeys","iterator","wrappedValues","wrappedEntries","ownKeys","cb","thisArg","raw","res","every","filter","lastIndexOf","findIndex","find","flat","flatMap","separator","join","_args","some","end","initValue","reduce","curr","reduceRight","wrappedClear","wrappedDelete","wrappedForEach","wrappedAdd","wrappedGet","wrappedSet","wrappedHas","k","next","done","values","ProxyObservable","ComputedObserver","observerLocator","useProxy","_isRunning","_isDirty","_callback","_coercer","_coercionConfig","_wrapped","$get","init","compute","run","useCoercer","coercer","coercionConfig","useCallback","callback","IDirtyChecker","DirtyCheckSettings","timeoutsPerCheck","disabled","throw","resetToDefault","DirtyChecker","register","c","Registration","singleton","aliasTo","tracked","_task","_elapsedFrames","p","resolve","IPlatform","check","isDirty","flush","DirtyCheckProperty","createProperty","addProperty","property","taskQueue","queueTask","persistent","removeProperty","cancel","dirtyChecker","_oldValue","_dirtyChecker","_v","PrimitiveObserver","_key","PropertyAccessor","SetterObserver","_observing","oV","stop","propertyAccessor","IObserverLocator","ObserverLocator","INodeObserverLocator","cachedCallback","DefaultNodeObserverLocator","handles","getAccessor","IComputedObserverLocator","DefaultLocator","pd","requestor","_adapters","_nodeObserverLocator","_computedObserverLocator","addAdapter","adapter","lookup","getObserverLookup","createObserver","cached","$observers","observedArray","observedMap","isArrayIndex","getOwnPropDesc","getProto","_getAdapterObserver","getCollectionObserver","getPrototypeOf","getOwnPropertyDescriptor","instance","IObservation","Observation","inject","_defaultWatchOptions","immediate","effect","RunEffect","watch","getter","options","$oldValue","stopped","maxRunCount","queued","running","runCount","getObserversLookup","noValue","observable","targetOrConfig","SetterNotifier","mixed","isClassDecorator","config","emptyObject","arguments","kind","createFieldInitializer","createDescriptor","$initialValue","addInitializer","initialValue","targetIsClass","observableGetter","notifier","getNotifier","descriptor","callbackKey","_setter","_hasSetter","nowrap","decorator"],"mappings":"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"}