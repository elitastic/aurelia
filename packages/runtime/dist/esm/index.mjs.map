{"version":3,"file":"index.mjs","sources":["../../src/utilities.ts","../../src/observation.ts","../../src/observation/subscriber-batch.ts","../../src/observation/subscriber-collection.ts","../../src/errors.ts","../../src/observation/collection-length-observer.ts","../../src/observation/array-observer.ts","../../src/observation/set-observer.ts","../../src/observation/map-observer.ts","../../src/observation/connectable.ts","../../src/observation/connectable-switcher.ts","../../src/observation/proxy-observation.ts","../../src/observation/computed-observer.ts","../../src/observation/dirty-checker.ts","../../src/observation/primitive-observer.ts","../../src/observation/property-accessor.ts","../../src/observation/setter-observer.ts","../../src/observation/observer-locator.ts","../../src/observation/effect-runner.ts","../../src/observation/observable.ts","../../src/observation/proxy-decorators.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"names":["O","Object","hasOwnProp","prototype","hasOwnProperty","def","Reflect","defineProperty","createError","message","Error","isFunction","v","isObject","isArray","Array","isSet","Set","isMap","Map","areEqual","is","defineHiddenProp","obj","key","value","enumerable","configurable","writable","ensureProto","proto","defaultValue","objectAssign","assign","objectFreeze","freeze","safeString","String","createInterface","DI","createLookup","create","getMetadata","Metadata","get","defineMetadata","define","ICoercionConfiguration","atNone","atObserver","atNode","atLayout","AccessorType","None","Observer","Node","Layout","copyIndexMap","existing","deletedIndices","deletedItems","length","arr","i","slice","isIndexMap","createIndexMap","cloneIndexMap","indexMap","clone","currBatch","batching","batch","fn","prevBatch","newBatch","pair","subs","batchRecord","col","hasChanges","ii","has","set","notify","notifyCollection","addCollectionBatch","collection","addValueBatch","newValue","oldValue","subscriberCollection","target","context","subscriberCollectionDeco","getSubscriberRecord","this","SubscriberRecord","addSubscriber","subscriber","add","removeSubscriber","remove","decoratedTarget","WeakSet","constructor","count","_subs","includes","idx","indexOf","splice","val","oldVal","len","handleChange","handleCollectionChange","createMappedError","code","details","padStart","map","CollectionLengthObserver","owner","type","_value","_obj","getValue","setValue","Number","isNaN","_arr","_","implementLengthObserver","CollectionSizeObserver","size","_collection","klass","subscribe","unsubscribe","lookupMetadataKey","Symbol","for","observerLookup","WeakMap","sortCompare","x","y","toString","preSortCompare","insertionSort","from","to","compareFn","velement","ielement","vtmp","itmp","order","j","quickSort","thirdIndex","v0","v1","v2","i0","i1","i2","c01","c02","c12","vpivot","ipivot","lowEnd","highStart","vtopElement","partition","methods","observe","native","overrideArrayPrototypes","$push","push","$unshift","unshift","$pop","pop","$shift","shift","$splice","$reverse","reverse","$sort","sort","args","o","apply","argCount","inserts","call","element","index","start","deleteCount","relativeStart","actualStart","Math","max","min","actualDeleteCount","itemCount","deleted","middle","lower","upper","lowerValue","lowerIndex","upperValue","upperIndex","shouldNotify","method","enableArrayObservationCalled","observationEnabledKey","enableArrayObservation","undefined","observing","disableArrayObservation","ArrayObserver","array","indexObservers","lenObs","getLengthObserver","getIndexObserver","ArrayIndexObserver","doNotCache","arrayObserver","noChange","prevValue","currValue","getArrayObserver","observer","$add","$clear","clear","$delete","delete","oldSize","newSize","keys","entry","deleteResult","descriptorProps","enableSetObservationCalled","enableSetObservation","disableSetObservation","SetObserver","observedSet","getSetObserver","$set","entries","enableMapObservationCalled","enableMapObservation","disableMapObservation","MapObserver","getMapObserver","connectableDecorator","BindingObserverRecord","b","version","forEach","unsubscribeStale","clearAll","unsubscribeAll","subscribable","getObserverRecord","obs","oL","getObserver","observeCollection","subscribeTo","noopHandleChange","noopHandleCollectionChange","connectable","_connectable","connectables","connecting","pauseConnecting","resumeConnecting","currentConnectable","enterConnectable","exitConnectable","ConnectableSwitcher","current","enter","exit","pause","resume","R$get","toStringTag","proxyMap","nowrapClassKey","nowrapPropKey","canWrap","rawKey","wrap","getProxy","createProxy","getRaw","unwrap","doNotCollect","object","toPrimitive","handler","arrayHandler","collectionHandler","objectHandler","proxiedObj","Proxy","receiver","wrappedArrayMap","wrappedArrayIncludes","wrappedArrayIndexOf","wrappedArrayLastIndexOf","wrappedArrayEvery","wrappedArrayFilter","wrappedArrayFind","wrappedArrayFindIndex","wrappedArrayFlat","wrappedArrayFlatMap","wrappedArrayJoin","wrappedArrayPush","wrappedArrayPop","wrappedReduce","wrappedReduceRight","wrappedArrayReverse","wrappedArrayShift","wrappedArrayUnshift","wrappedArraySlice","wrappedArraySplice","wrappedArraySome","wrappedArraySort","wrappedKeys","iterator","wrappedValues","wrappedEntries","ownKeys","cb","thisArg","raw","res","every","filter","lastIndexOf","findIndex","find","flat","flatMap","separator","join","_args","some","end","initValue","reduce","curr","reduceRight","wrappedClear","wrappedDelete","wrappedForEach","wrappedAdd","wrappedGet","wrappedSet","wrappedHas","k","next","done","values","ProxyObservable","ComputedObserver","observerLocator","useProxy","_isRunning","_isDirty","_callback","_coercer","_coercionConfig","_wrapped","$get","init","compute","run","useCoercer","coercer","coercionConfig","useCallback","callback","IDirtyChecker","DirtyCheckSettings","timeoutsPerCheck","disabled","throw","resetToDefault","DirtyChecker","register","c","Registration","singleton","aliasTo","tracked","_task","_elapsedFrames","p","resolve","IPlatform","check","isDirty","flush","DirtyCheckProperty","createProperty","addProperty","property","taskQueue","queueTask","persistent","removeProperty","cancel","dirtyChecker","_oldValue","_dirtyChecker","_v","PrimitiveObserver","_key","PropertyAccessor","SetterObserver","_observing","oV","stop","propertyAccessor","IObserverLocator","ObserverLocator","INodeObserverLocator","cachedCallback","DefaultNodeObserverLocator","handles","getAccessor","IComputedObserverLocator","DefaultLocator","pd","requestor","_adapters","_nodeObserverLocator","_computedObserverLocator","addAdapter","adapter","lookup","getObserverLookup","createObserver","cached","$observers","observedArray","observedMap","isArrayIndex","getOwnPropDesc","getProto","_getAdapterObserver","getCollectionObserver","getPrototypeOf","getOwnPropertyDescriptor","instance","IObservation","Observation","inject","_defaultWatchOptions","immediate","effect","RunEffect","watch","getter","options","$oldValue","stopped","maxRunCount","queued","running","runCount","observable","getObserversLookup","noValue","targetOrConfig","SetterNotifier","mixed","isClassDecorator","config","name","emptyObject","arguments","kind","createFieldInitializer","createDescriptor","$initialValue","addInitializer","initialValue","targetIsClass","observableGetter","notifier","getNotifier","descriptor","callbackKey","_setter","_hasSetter","nowrap","decorator"],"mappings":"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"}